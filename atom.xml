<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ceasteo is here🥝</title>
  
  <subtitle>document imagine things</subtitle>
  <link href="https://starlike-daydream.github.io/atom.xml" rel="self"/>
  
  <link href="https://starlike-daydream.github.io/"/>
  <updated>2024-04-24T05:42:43.237Z</updated>
  <id>https://starlike-daydream.github.io/</id>
  
  <author>
    <name>Ceasteo🥝</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2024年4月15日-2024年4月21日周报</title>
    <link href="https://starlike-daydream.github.io/posts/a61e53f.html"/>
    <id>https://starlike-daydream.github.io/posts/a61e53f.html</id>
    <published>2024-04-24T05:24:29.000Z</published>
    <updated>2024-04-24T05:42:43.237Z</updated>
    
    <content type="html"><![CDATA[<h3 id="本周学习大纲">本周学习大纲</h3><ol><li><strong>大体是刷题</strong></li></ol><h3 id="本周学习日历">本周学习日历</h3><table><thead><tr><th>日历</th><th>学习内容</th><th>其他</th></tr></thead><tbody><tr><td>星期一</td><td>尝试写Java基于知识图谱的问答接口，提交服创文档</td><td></td></tr><tr><td>星期二</td><td>粗略了解Python统计建模，了解Stata的基本使用，有序probit模型和熵值法</td><td></td></tr><tr><td>星期三</td><td>PTA刷题23真题和23模拟L2-3，了解C++捕获异常和删除vector中的指定元素，了解到iostream头文件也可以使用printf等C风格输入输出，C++重写2020模拟L–8阅览室并了解到删除map的元素</td><td></td></tr><tr><td>星期四</td><td>跟任康学习发推文，刷题，学习前缀和和差分，教任康便捷的使用图床</td><td>完成互联网+任务</td></tr><tr><td>星期五</td><td>学习双指针，去重排序，计数排序，重载运算符按指定规则排序，刷天梯赛23真题，了解到字符串转化列表的方式在字符串某一位置进行插入</td><td></td></tr><tr><td>星期六</td><td>刷题，翻看之前写的代码，翻阅STL，天梯赛正式比赛，搞清楚比赛时用错的binary_search方法，根据之前学习的前缀和算法AC洛谷P2367，了解min和max方法</td><td></td></tr><tr><td>星期天</td><td>，重做帮助色盲，九宫格，懂蛇语（但没A），了解C++分割字符串和字符转字符串但没完全明白</td><td></td></tr></tbody></table><h3 id="本周学习内容及收获">本周学习内容及收获</h3><h4 id="算法学习">算法学习</h4><h5 id="笔记：">笔记：</h5><p>第一课： <a href="https://www.mubu.com/doc/xB_eggXfVh">https://www.mubu.com/doc/xB_eggXfVh</a><br>第二课（未看完）： <a href="https://www.mubu.com/doc/1IuNBGLKqqh">https://www.mubu.com/doc/1IuNBGLKqqh</a></p><h5 id="完成状态：">完成状态：</h5><p>基本完成本周任务。</p><h5 id="学习内容：">学习内容：</h5><p>见表格</p><h5 id="学习收获">学习收获</h5><p>比赛还是得用本地IDE好一点，老是拼错</p><h3 id="下周学习大纲">下周学习大纲</h3><ol><li><p><strong>Stata</strong></p></li><li><p><strong>算法+JSCPC准备</strong></p></li></ol>]]></content>
    
    
    <summary type="html">星辰大海组组长曹光由2024年4月15日-2024年4月21日周报</summary>
    
    
    
    <category term="周报" scheme="https://starlike-daydream.github.io/categories/%E5%91%A8%E6%8A%A5/"/>
    
    
    <category term="学习记录" scheme="https://starlike-daydream.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    
    <category term="小组周报" scheme="https://starlike-daydream.github.io/tags/%E5%B0%8F%E7%BB%84%E5%91%A8%E6%8A%A5/"/>
    
  </entry>
  
  <entry>
    <title>星辰大海组周报</title>
    <link href="https://starlike-daydream.github.io/posts/2013454d.html"/>
    <id>https://starlike-daydream.github.io/posts/2013454d.html</id>
    <published>2023-12-18T14:01:19.000Z</published>
    <updated>2024-04-24T07:15:00.615Z</updated>
    
    <content type="html"><![CDATA[<h1>星辰大海组周报</h1><table><thead><tr><th style="text-align:center">组员姓名</th><th style="text-align:center">周报网址</th></tr></thead><tbody><tr><td style="text-align:center">曾馨岚</td><td style="text-align:center"><a href="https://mysophia.github.io/">https://mysophia.github.io/</a></td></tr><tr><td style="text-align:center">戴巧甜</td><td style="text-align:center"><a href="https://daichocolate.github.io/">https://daichocolate.github.io/</a></td></tr><tr><td style="text-align:center">纪星呈</td><td style="text-align:center"><a href="https://yousiming.github.io/">Hexo (yousiming.github.io)</a></td></tr><tr><td style="text-align:center">董杨凌云</td><td style="text-align:center"><a href="https://modetou.github.io/">https://modetou.github.io/</a></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">属于701工作坊组织的星辰大海小组周报</summary>
    
    
    
    
    <category term="小组周报" scheme="https://starlike-daydream.github.io/tags/%E5%B0%8F%E7%BB%84%E5%91%A8%E6%8A%A5/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客</title>
    <link href="https://starlike-daydream.github.io/posts/c442673f.html"/>
    <id>https://starlike-daydream.github.io/posts/c442673f.html</id>
    <published>2023-12-17T07:15:29.000Z</published>
    <updated>2024-04-24T05:47:46.611Z</updated>
    
    <content type="html"><![CDATA[<h1>一、前置知识</h1><ul><li><p>本文档参考博客文章：<a href="http://t.csdnimg.cn/XiZky">http://t.csdnimg.cn/XiZky</a></p></li><li><p>幕布文档的基本操作：（推荐用浏览器打开本文档链接，而不是用微信，手机端显示也会有问题），访问链接：<a href="https://www.mubu.com/doc/5OeZGO2XKgh">https://www.mubu.com/doc/5OeZGO2XKgh</a></p><ul><li><p>每个小圆点都是一个主题，如果这个主题有子主题（会有半透明外圆环），那鼠标放在这个主题的左边就能看到小三角形，点击小三角形就可以展开。收缩这部分的主题</p></li><li><p>如果点击小圆点就会进入这个主题，只展示这个主题的部分，可以在右上角点击它的父级主题返回到之前的主题</p></li><li><p>文档里的网址链接单击即可打开，可能有些是国外网站，访问比较慢，如果下载node.js或者Git遇到问题，可以到我的Gitee下载安装<a href="https://gitee.com/starlike_daydream/installer">Installer: 国外的软件可能会下载较慢，为了方便下载，放了一些软件的安装包 (gitee.com)</a>（就是要注册一个Gitte）</p><ul><li>这里以Git为例，先点进去对应安装包，再点击右方的原始数据即可<img src="https://api2.mubu.com/v3/document_image/deabd45e-e2ad-448b-8f61-3a85274eac16-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/7d78a007-3041-439c-bc10-9cf85402fde9-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>命令行的操作：后面的命令都是在命令行(cmd)或者类似命令行(Git Bash)的界面运行</p><ul><li><p>打开命令行：win+R打开运行，输入cmd打开</p></li><li><p>cls : 清空屏幕</p></li><li><p>cd 目录: 更改当前所在目录</p></li><li><p>cd 当前目录的子文件夹：进入到子文件夹（）</p></li><li><p>rd… : 返回上一级目录</p></li><li><p>exit : 退出命令行</p></li><li><p>rd\ : 返回根目录</p></li><li><p>D:    : 盘名加冒号切盘(无需回到根目录)</p></li><li><p>dir : 显示该目录下的文件</p></li><li><p>上下方向键回溯历史命令</p></li></ul></li><li><p>Markdown文件（后缀是md的文件）的编写：推荐使用Typora，不需要记忆语法格式了，ctrl+/也可以查看源代码，其它软件编辑也可以</p></li><li><pre><code>注意点：四个空格会生成代码块，n个井号#代表n级标题，-中划线代表无序标题，后面要有空格</code></pre></li><li><p>浏览器展示的页面文件–html文件：我们md文档将会生成html文件用于在浏览器展示。</p><ul><li>这部分由于只给浏览页面的用户看，我们也称之为前端，这个个人博客的搭建只涉及一点前端的知识</li></ul></li></ul><h1>二、下载生成个人博客所需要的软件/环境</h1><h2 id="1-Git：（第三部分会用到）">1.Git：（第三部分会用到）</h2><ul><li><p>简介：分布式版本控制系统，用于上传代码/文件（这里会用到）和记录代码/文件的历史版本，合并文件改动，团队项目必备工具（详见<a href="https://www.liaoxuefeng.com/wiki/896043488029600">Git教程 - 廖雪峰的官方网站</a>）。</p><ul><li><p>官网安装：<a href="https://git-scm.com/download">Git - Downloads (git-scm.com)</a>，找到download下载（应该在左上角），若要选择版本，选择上面的64位版本（与电脑系统对应的版本）</p></li><li><p>1（64位windows版安装图示）<img src="https://api2.mubu.com/v3/document_image/01386042-507a-4a5a-b8ed-b0701631839f-8085313.jpg" alt="img"></p></li><li><p>2<img src="https://api2.mubu.com/v3/document_image/55c37faf-b396-48c5-8359-ae3e7f88c430-8085313.jpg" alt="img"></p><ul><li><p>官网下载慢的话可以用我的下载链接：<a href="https://gitee.com/starlike_daydream/installer/raw/master/Git-2.43.0-64-bit.exe">https://gitee.com/starlike_daydream/installer/raw/master/Git-2.43.0-64-bit.exe</a></p></li><li><p>如果下载的文件没有后缀名，在文件名后面加上.exe扩展名就可以安装了</p></li><li><p>检测是否安装成功：git --version，出现对应版本号即代表安装成功</p></li><li><p>后面的命令可以在Git Bash执行（在任意文件目录右击空白处选择Open Git Bash Here，没有的话就选择更多选项（win11）），也可以win+R打开运行输入cmd，在命令行运行。</p></li></ul></li><li><p>如果遇到执行不成功的情况，可以尝试用管理员身份运行Git Bash/cmd</p></li></ul></li></ul><h2 id="2-node-js：Node-js-中文网-nodejs-cn-安装，进去后点击下载安装，选择长期支持版即可">2.node.js：<a href="https://nodejs.cn/">Node.js 中文网 (nodejs.cn)</a>安装，进去后点击下载安装，选择长期支持版即可</h2><ul><li><p>官网下载慢的话可以用我的下载链接：<a href="https://gitee.com/starlike_daydream/installer/raw/master/node-v18.18.0-x64.msi">https://gitee.com/starlike_daydream/installer/raw/master/node-v18.18.0-x64.msi</a></p></li><li><p>官网安装图示（windows64位版）</p><ul><li><p>1.<img src="https://api2.mubu.com/v3/document_image/1d31654f-cb30-4f83-9136-bedfbb0297d4-8085313.jpg" alt="img"></p></li><li><p>2.<img src="https://api2.mubu.com/v3/document_image/744e3f27-ae77-459b-bf75-42acf396f7d2-8085313.jpg" alt="img"></p><ul><li><p>简介：Node.js 是基于 <a href="https://v8.dev/">V8 JavaScript 引擎</a> 构建的 JavaScript 运行时，可以用它搭建本地服务器，这里我们需要用到它的npm命令</p></li><li><p>检测是否安装成功：命令行运行node -v和npm -v（注意中间要有空格），出现对应版本号即代表安装成功</p></li><li><p>添加国内镜像加快下载速度：运行命令npm config set registry <a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a>（如果还是下载缓慢或者失败可以切换其他镜像源）</p></li></ul></li><li><p>查看自己当前的镜像：运行命令：npm get registry</p></li><li><p>切换加速镜像源（推荐）：运行命令：npm config set registry <a href="https://registry.npmmirror.com/">https://registry.npmmirror.com</a></p></li><li><p>切回官方镜像：运行命令：npm config set registry <a href="http://www.npmjs.org/">http://www.npmjs.org</a></p></li><li><p>其他国内镜像源：<a href="https://blog.csdn.net/qq_43940789/article/details/131449710">国内npm源镜像（npm加速下载） 指定npm镜像_npm 国内镜像-CSDN博客</a></p></li><li><p>如果说切换镜像还是不行，可以尝试取消代理，或者降低npm的版本，在尝试上面的步骤</p><ul><li><p>npm config set proxy null                // proxy:外部请求的代理</p></li><li><p>npm config set https-proxy null              // https-proxy:用于代理https请求的</p></li><li><p>npm install npm@6.4.1 -g            用于降低npm版本</p></li><li><p>安装好node.js之后就可以用npm命令下载安装hexo了</p></li></ul></li></ul></li></ul><h2 id="3-Hexo的安装与配置：">3.Hexo的安装与配置：</h2><ul><li><p>简介：一个基于node.js的帮我们写好的博客框架，用了它，我们只需要修改部分内容，就能获得只属于自己的个人博客，并编写文章上传了</p><ul><li><p>(1)创建一个文件夹MyBlog，以后在这个文件夹操作，存放项目文件以及博客文章</p></li><li><p>(2)运行命令：npm install -g hexo-cli：安装hexo</p></li><li><p>(3)运行命令：hexo v：查看是否安装成功，出现对应版本号即代表安装成功</p></li><li><p>(4)运行命令：hexo init：在当前目录（博客文件夹目录，而且必须为空目录）初始化一个使用hexo框架的项目（默认）</p></li><li><p>(5)运行命令：hexo generate：生成项目</p></li><li><p>(6)运行命令：hexo s/hexo server：启动本地服务器，按Ctrl键点击链接即可用默认浏览器访问，用按Ctrl+C停止运行</p></li><li><p>但只有本机能访问，想要在互联网上也能访问就需要下面的步骤</p></li></ul></li></ul><h1>三、使用GitHub提供的免费服务器</h1><ul><li>GitHub简介：一个项目开放源代码的国外的代码托管平台，我们将用这里的GitHub仓库的Pages功能使用GitHub为我们提供的个人服务器</li></ul><h2 id="1-注册github账号（https-github-com-），并创建一个仓库（默认选项创建就行）–-仓库名格式要求：你的GitHub用户名-github-io">1.注册github账号（<a href="https://github.com/">https://github.com/</a>），并创建一个仓库（默认选项创建就行）–&gt;仓库名格式要求：你的GitHub用户名.<a href="http://github.io/">github.io</a></h2><ul><li><p>我的用户名是Cesteo，创建的仓库名就叫<a href="http://cesteo.github.io/">Cesteo.github.io</a><img src="https://api2.mubu.com/v3/document_image/d83f4829-d7a4-4833-ba7e-8d78d46ae93f-8085313.jpg" alt="img"></p><ul><li>如果注册过程遇到问题，可以参考这篇博客的教程：<a href="http://t.csdnimg.cn/IKe0L">http://t.csdnimg.cn/IKe0L</a></li></ul></li></ul><h2 id="2-初始化Git的用户名和邮箱（加–global是为所有git项目设置，不加则是在当前目录的git项目设置）">2.初始化Git的用户名和邮箱（加–global是为所有git项目设置，不加则是在当前目录的git项目设置）</h2><ul><li><p>注意：这里的yourname输入你的GitHub用户名，youremail输入你GitHub的邮箱。这样GitHub才能知道你是不是对应它的账户。</p></li><li><p>(1)初始化用户名–运行命令：git config --global <a href="http://user.name/">user.name</a>  “yourname”（注意<a href="http://user.name/email">user.name/email</a>和英文双引号&quot;之间要有一个空格）</p><ul><li><p>(2)初始化邮箱–运行命令：git config --global user.email  “youremail”</p></li><li><p>(3)确认设置用户名和邮箱成功：执行以下命令</p></li><li><p>用户名：git config --global <a href="http://user.name/">user.name</a></p></li><li><p>邮箱：git config --global user.email</p></li></ul></li></ul><h2 id="3-ssh连接：只有连接成才能上传代码">3.ssh连接：只有连接成才能上传代码</h2><ul><li><p>(1)下载github部署插件：运行命令：npm install hexo-deployer-git --save</p><ul><li><p>本地生成获取ssh密钥</p></li><li><p>(2)生成密钥：运行命令：ssh-keygen -t rsa -C “youremail”（这里改为自己的邮箱），可能要一路回车</p></li><li><p>(3)获取密钥：在Git Bash运行命令cat ~/.ssh/id_rsa.pub，然后复制这行命令运行的结果</p><ul><li>github创建ssh密钥</li></ul></li><li><p>(4)打开<a href="http://github.com/">github</a>，在右上角的头像下面点击settings，再点击SSH and GPG keys，新建一个SSH，名字随便取一个都可以，把你的id_rsa.pub里面的信息复制进去，点击create/创建即可完成创建</p><ul><li>(5)验证ssh连接是否成功：ssh -T <a href="mailto:git@github.com">git@github.com</a>，出现用户名，即代表访问成功</li></ul></li></ul></li><li><p>ssh连接我遇到的问题</p><ul><li><p>ssh连接除了好几次错误：先是22端口拒绝连接，然后我去搜，最后发现电脑只有ssh客户端，没有ssh服务器，然后下了似乎又说真实性，yes/no什么的，这里又搜了一下，是要输yes，我的443端口没问题，不是防火墙的原因，好像少了一个kown_hosts文件</p></li><li><p>类似下图的错误，反正yes着yes着的、差不多就好了<img src="https://api2.mubu.com/v3/document_image/dfd0e086-ad97-40e6-99d8-638d6a486aab-8085313.jpg" alt="img"></p></li></ul></li></ul><h2 id="4-更改配置文件">4.更改配置文件</h2><ul><li><p>生产的博客项目根目录下的_config.yml中的url，url是Pages生成的网站网址，可以第六步再配置，deploy下的repository 要配置成自己的仓库地址（记得文件要保存，如果编辑器窗口顶部的文件名前面有个星号*，那就说明话没有保存）</p></li><li><p>我的配置：<img src="https://api2.mubu.com/v3/document_image/2549dbeb-1f10-440d-990f-3491b9e6ba0f-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/74beb929-8058-4a36-924a-e366c7d71fc7-8085313.jpg" alt="img"></p><ul><li><p>deploy的repository填deploy</p></li><li><p>特别注意这里还有个坑：修改代码时候注意空格，例如 repo： 后面都是有空格的，删除空格之后，后面运行的时候就会报错，这是编码的规定，还有就是deploy一定从行首开始写，不要加空格，注意格式</p></li></ul></li></ul><h2 id="5-使用hexo的常用命令来生成网页：">5.使用hexo的常用命令来生成网页：</h2><ul><li><p>(1)清除之前生成的项目–hexo clean（可以清除之前项目的一些问题）</p><ul><li><p>(2)在本地生成项目–hexo g（缩写）/hexo generate</p></li><li><p>(3)把项目部署到GitHub上–hexo d（缩写）/hexo deploy</p></li><li><p>这里会让你登录GitHub</p></li><li><p>如果在GitHub创建了token，就需要在生成token时勾选repo下面这些权限</p><ul><li><img src="https://api2.mubu.com/v3/document_image/3b120d90-9dc8-4523-aac0-260e2c46c750-8085313.jpg" alt="img"></li></ul></li><li><p>如果访问Github慢，部署失败的问题，可以在hosts文件（位于C:\Windows\System32\drivers\etc）添加我的hosts（<a href="https://gitee.com/starlike_daydream/installer/blob/master/hosts">hosts · starlike_daydream/Installer - 码云 - 开源中国 (gitee.com)</a>）的51-82行到你的hosts里</p></li><li><p>Github加速器：<a href="https://steampp.net/">下载链接</a>（最好只用于访问，建立ssh连接可能会有问题，本人亲身尝试）</p></li><li><p>更改hosts文件：<a href="https://developer.aliyun.com/article/1077240">https://developer.aliyun.com/article/1077240</a></p><ul><li>(4)上传一个帖子/笔记：hexo new post “文件名”（这个文件就是md文档，内容将在这里编写）（位于生成的博客目录-&gt;source-&gt;_post）</li></ul></li></ul></li><li><p>(5)生成网页的连接的位置：</p><ul><li>你创建的仓库repository–&gt;上方菜单栏Settings–&gt;左方菜单栏Pages–&gt;Source选择：Deploy from a branch–&gt;Branch选择：master，folder选择root–&gt;点击save过一会刷新应该就会生成<img src="https://api2.mubu.com/v3/document_image/1a95c305-fb90-4129-97fc-a67a2b8515e6-8085313.jpg" alt="img"></li></ul></li></ul><h2 id="6一般的使用步骤：">6一般的使用步骤：</h2><ul><li>编写md文档，hexo g+hexo d生成部署项目，等到GitHub的项目右上角的小圆点标识变绿（再顶部的菜单Action点击一个上传操作即可查看详细过程）即可刷新博客网页，查看生成并部署好的在线网页</li></ul><h2 id="7配置个人信息：">7配置个人信息：</h2><ul><li>在文件根目录下的_config.yml，就是整个hexo框架的配置文件了。可以在里面修改大部分的配置。详细可参考官方的<a href="https://hexo.io/zh-cn/docs/configuration">配置描述</a>。<img src="https://api2.mubu.com/v3/document_image/f35fd56f-7670-4c59-b9a8-84d234d543ee-8085313.jpg" alt="img"></li></ul><h1>4、后续：个人博客还有很多炫酷的，有意思的功能，大家可以自行探索</h1><ul><li><p>切换主题</p><ul><li>我使用的是这篇博客的主题：<a href="https://github.com/blinkfox/hexo-theme-matery">https://github.com/blinkfox/hexo-theme-matery</a></li></ul></li><li><p>增加功能:可参考主题的readme文档</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;一、前置知识&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;本文档参考博客文章：&lt;a href=&quot;http://t.csdnimg.cn/XiZky&quot;&gt;http://t.csdnimg.cn/XiZky&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;幕布文档的基本操作：（推荐用浏览器</summary>
      
    
    
    
    <category term="Computer Learning" scheme="https://starlike-daydream.github.io/categories/Computer-Learning/"/>
    
    
    <category term="Blog" scheme="https://starlike-daydream.github.io/tags/Blog/"/>
    
    <category term="Building" scheme="https://starlike-daydream.github.io/tags/Building/"/>
    
  </entry>
  
  <entry>
    <title>MySQL03</title>
    <link href="https://starlike-daydream.github.io/posts/81896953.html"/>
    <id>https://starlike-daydream.github.io/posts/81896953.html</id>
    <published>2023-12-05T08:30:30.000Z</published>
    <updated>2024-04-24T05:48:25.916Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>MySQL-多表查询</p><ul><li><p>概述</p><ul><li><p>数据准备：将资料的sql脚本导入到本地数据库(8条dept部门表数据，17条emp员工表数据)</p></li><li><p>多表查询-介绍：从多张表查询</p><ul><li>查询测试数据的表，select * from tb_emp,tb_dept;会发现查询出来了85条数据，仔细看可以发现每个员工都和五个部门组合在了一次，这个现象叫笛卡尔积</li></ul></li><li><p>笛卡尔积：笛卡尔乘积是指在数学中，两个集合（A集合和B集合）的所有组合情况</p><ul><li><p>数据库的笛卡尔积现象：a集合每一条记录都和b集合的记录做一个匹配，总数据量就是a集合的数据量乘以b集合的数据量<img src="https://api2.mubu.com/v3/document_image/24b1649f-efe1-4b89-bbfe-a1c46f320ec6-8085313.jpg" alt="img"></p></li><li><p>在多表查询时，需要消除无效的笛卡尔积<img src="https://api2.mubu.com/v3/document_image/4bd75aa7-0ec4-45ef-b1bc-00e03c941812-8085313.jpg" alt="img"></p></li></ul></li><li><p>但是实际上每个员工只能归属于一个部门，所以每五条记录只有一条记录是有效记录，其他四个都是无效记录，不需要，而多表查询就是根据业务需求查询多张表的信息，并且根据业务需要，去除掉这些无效的笛卡尔积</p><ul><li><p>例如要查询每个员工的信息和每个员工对应部门的信息，那我们将员工的部门id字段和部门表的id字段对应起来就可以了，而其它数据对于我们来说都是无效的笛卡尔积<img src="https://api2.mubu.com/v3/document_image/acdae4d8-501d-4064-bfd5-050dd73d7303-8085313.jpg" alt="img"></p></li><li><p>所以只要加上一个连接条件，查询员工表的部门id等于部门表的id的记录，加上关键字where，后面指定连接条件<img src="https://api2.mubu.com/v3/document_image/351c6680-516a-4883-8b23-5c5dcbad60c3-8085313.jpg" alt="img"></p></li></ul></li><li><p>分类：</p><ul><li><p>连接查询</p><ul><li><p>内连接：相当于查询A、B交集部分数据</p></li><li><p>外连接：</p><ul><li><p>左外链接：查询坐标所有数据（包括两张表交集部分数据）</p></li><li><p>左外链接：查询坐标所有数据（包括两张表交集部分数据）<img src="https://api2.mubu.com/v3/document_image/9bef7f95-df33-4de2-87de-4d27b4522f0a-8085313.jpg" alt="img"></p></li></ul></li></ul></li><li><p>子查询：查询中又嵌套了查询</p></li><li><p>图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/230716ff-2518-4094-a108-7c6b2bcd3cc5-8085313.jpg" alt="img"></li></ul></li></ul></li></ul></li><li><p>内连接</p><ul><li><p>语法</p><ul><li><p>隐式内连接：select 字段列表 from 表1,表2 where 条件 …;</p></li><li><p>显示内连接：select 字段列表 from 表1 [inner] join 表2 on 连接条件…;</p></li></ul></li><li><p>需求</p><ul><li><p>我的代码，没问题<img src="https://api2.mubu.com/v3/document_image/08e50221-fede-4c3a-8319-ea02755925bb-8085313.jpg" alt="img"></p></li><li><p>想要员工的name字段和部门的name字段，直接写两个name，数据库不能分清是部门的名称还是员工的名字，是会报错的，此时在字段名前指定表明，比如tb_<a href="http://emp.name/">emp.name</a>字段<img src="https://api2.mubu.com/v3/document_image/a320ccd5-9aaf-4dda-8dbd-ed3737db7633-8085313.jpg" alt="img"></p></li><li><p>一共有17条数据，只查询出来了16条，是因为有一个员工部门是null，未分配，那这条记录就是和部门表没有关联的，由于内连接查询的是两张表的交集数据，所以A表没有和B表产生关联的数据是查询不出来的<img src="https://api2.mubu.com/v3/document_image/dda99072-1401-4c13-9ead-0a72ff0dcb30-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/0c8d25c7-28ed-4a03-88cd-edb6c885f86b-8085313.jpg" alt="img"></p></li><li><p>显示内连接需要用inner join 要连接的表 on 连接条件：显示的声明，除此和隐式 内连接差别不大（inner可以不加）</p></li></ul></li><li><p>起别名：在from后面的表名空格加上别名，后面的连接条件表名和前面的表名.字段名都需要用别名代替（当表名比较长，一个个打很麻烦，这时就可以考虑起别名）<img src="https://api2.mubu.com/v3/document_image/48882b7a-6559-4275-80bd-dd0c20a3d1a7-8085313.jpg" alt="img"></p></li></ul></li><li><p>外连接</p><ul><li><p>语法</p><ul><li><p>左外连接：select 字段列表 from 表1 left [ outer ] join 表2 on 连接条件…;（表1也叫左表，表2也叫右表，左外连接会完全包含左表）</p></li><li><p>右外连接：select 字段列表 from 表1 right [ outer ] join 表2 on 连接条件…;（表1也叫坐标，表2也叫右表，右外连接会完全包含右表）</p></li></ul></li><li><p>需求</p><ul><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/eec3eede-5210-40e0-a2ce-c6a4f5512700-8085313.jpg" alt="img"></p></li><li><p>刚才在内链接中陈友谅的部门未分配，没有和部门表产生关联，内连接查询不出来，但是外连接就可以了</p></li><li><p>老师的代码第一次查询了所有员工（17条），第二次查询了所有的部门（18条==16条交集数据+包含在部门表但是员工表没有数据），还起了别名<img src="https://api2.mubu.com/v3/document_image/016115c2-03cb-4e66-bb48-359cc6b25a8b-8085313.jpg" alt="img"></p></li><li><p>右外连接也可以改造成左外连接，right–&gt;左右表互调即可（也就是上图的第三条SQL语句，查询结果和第二条一样是18条，就算该部门没有员工也能查出来）</p></li></ul></li><li><p>左连接能查询到左表和两表交集的部分，右表也是同理。</p></li><li><p>在项目开发中，通常使用左外连接，很少使用右外连接，因为右外连接可以替换成左外连接</p></li></ul></li><li><p>子查询</p><ul><li><p>介绍：SQL语句中嵌套select语句，称为嵌套查询，又称子查询。</p></li><li><p>形式：select * from t1 where colum = ( select column1 from t2 … );</p></li><li><p>子查询外部的语句还可以是insert / update /delete / select 的任何一个，最常见的是 select。</p></li><li><p>分类</p><ul><li><p>标量子查询：</p><ul><li><p>概念：子查询返回的结果为单个值</p></li><li><p>常用的操作符： = &lt;&gt; &gt; &gt;=  &lt;  &lt;=</p></li><li><p>需求</p><ul><li><p>A.查询“教研部”的所有员工信息</p><ul><li><p>a.查询 教研部 的部门ID下的员工信息<img src="https://api2.mubu.com/v3/document_image/6252ff7c-32d9-47f6-90ac-8c866fdefbae-8085313.jpg" alt="img"></p></li><li><p>b.再查询该部门ID下的员工信息<img src="https://api2.mubu.com/v3/document_image/49fb3917-f085-45b6-a38f-224a7b6b2c10-8085313.jpg" alt="img"></p></li><li><p>将两条SQL语句合并为1条：直接把下面的2替换成上面的SQL语句，不过需要加上括号。可以看到效果是一样的<img src="https://api2.mubu.com/v3/document_image/75dabb4d-9e8a-4edf-b706-ff5cd965bf95-8085313.jpg" alt="img"></p></li></ul></li><li><p>B.查询再“方东白”入职之后的员工信息</p><ul><li><p>写子查询一定要考虑步骤是什么</p></li><li><p>a.查询方东白地入职时间</p></li><li><p>b.查询再“方东白”入职之后的员工信息</p></li></ul></li></ul></li></ul></li><li><p>列子查询：</p><ul><li><p>概念：子查询返回的结果为一列（可以为多行）</p></li><li><p>常用操作符：in、not in等</p></li><li><p>需求：</p><ul><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/22c7a51a-6f52-4922-ac8f-da075649fbca-8085313.jpg" alt="img"></p></li><li><p>a.查询教研部和咨询部地部门id</p></li><li><p>b.根据部门id，查询该部门下的员工信息</p></li></ul></li></ul></li><li><p>行子查询：</p><ul><li><p>子查询返回的结果为一行（可以为多列）</p></li><li><p>常用的操作符：=、&lt;&gt;、in、not in</p></li><li><p>需求</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/e397f8be-ce0e-4f6b-be05-79fe9493926e-8085313.jpg" alt="img"></p></li><li><p>a.查询&quot;韦一笑&quot;的入职日期及职位<img src="https://api2.mubu.com/v3/document_image/aeda9644-e5c9-4858-9633-355ce0b0b2b1-8085313.jpg" alt="img"></p></li><li><p>b.查询与其入职日期 及 职位都相同的员工信息<img src="https://api2.mubu.com/v3/document_image/8496d715-84ac-4a29-978a-615a3f5ae2ac-8085313.jpg" alt="img"></p></li><li><p>做替换，但是这条sql语句出现了多次子查询，性能太低，需要优化<img src="https://api2.mubu.com/v3/document_image/f43782e0-72b4-4c53-9bc7-cd475d07d766-8085313.jpg" alt="img"></p></li><li><p>其实and连接的两个=可以用()组合起来，不同字段用逗号分隔，就代表分别相等才成立下面两条语句是等价的<img src="https://api2.mubu.com/v3/document_image/f1fc7f0d-09ec-4adb-813b-f6aee3dc1510-8085313.jpg" alt="img"></p></li><li><p>所以最优解如下<img src="https://api2.mubu.com/v3/document_image/199b0f62-2307-43f8-8c3e-6c64c5c8a3ff-8085313.jpg" alt="img"></p></li></ul></li></ul></li><li><p>表子查询：</p><ul><li><p>子查询返回的结果为多行多列，常作为临时表</p></li><li><p>常用的操作符：in</p></li><li><p>需求</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/fd6adf5c-dc7c-4de0-8c1a-3d8a4d25d3f5-8085313.jpg" alt="img"></p></li><li><p>a.查询入职日期是“2006-01-01”之后的员工信息（这样就获得入职日期在2006-01-01之后的员工信息）<img src="https://api2.mubu.com/v3/document_image/9f522888-b584-44f7-a376-1904de134671-8085313.jpg" alt="img"></p></li><li><p>b.查询这部分的员工信息及其部门名称 - tb_dept（把子查询作为临时表使用）<img src="https://api2.mubu.com/v3/document_image/5acd4b91-3e7b-46cc-bce2-56a846255f51-8085313.jpg" alt="img"></p></li></ul></li></ul></li></ul></li></ul></li><li><p>案例</p><ul><li><p>需求1</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/d24ec0cd-a212-403e-843e-aaf3ae104b20-8085313.jpg" alt="img"></p></li><li><p>如果在需求中没有说明要完全包含哪张表的数据，就用内连接就可以了</p></li><li><p>老师的代码<img src="https://api2.mubu.com/v3/document_image/f37fab7f-e335-44b0-8929-ff931fa7d784-8085313.jpg" alt="img"></p></li></ul></li><li><p>需求2</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/4260b14a-7606-46dd-ad2c-753eb9d69a97-8085313.jpg" alt="img"></p></li><li><p>老师写的（范围闭区间可以用between）<img src="https://api2.mubu.com/v3/document_image/ca92f50a-1ae6-4c28-ba47-fcc4fae68144-8085313.jpg" alt="img"></p></li></ul></li><li><p>需求3</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/3ef58981-8520-4035-a4fb-a1fabf5b8a7c-8085313.jpg" alt="img"></p></li><li><p>老师写的（查询每个分类最贵的菜品，所以对分类进行分组，而且分组后的字段包括分组字段加上聚合函数）（没有特殊说明，直接用内连接）<img src="https://api2.mubu.com/v3/document_image/de6862e1-d33a-424d-8b16-ee06ad0d83a0-8085313.jpg" alt="img"></p></li></ul></li><li><p>需求4</p><ul><li><p>我写的（这里本来是想写<a href="http://d.name/">d.name</a>，但是后来发现<a href="http://c.name/">c.name</a>和<a href="http://d.name/">d.name</a>效果一样）<img src="https://api2.mubu.com/v3/document_image/bc5425dd-a3c3-440c-af3e-e7fe179f0aec-8085313.jpg" alt="img"></p></li><li><p>老师写的（老师在查询两个表时用连接条件消除了无效的笛卡尔积查询，关键字“各个分类”，“总数量”–&gt;分组查询，聚合函数统计，老师直接使用count(*)统计了分组后查询个数）<img src="https://api2.mubu.com/v3/document_image/584f7bfc-7b5a-4a4b-b432-4104e0b2ca77-8085313.jpg" alt="img"></p></li></ul></li><li><p>需求5</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/3817782e-638f-4b86-83ba-c80839a04ee5-8085313.jpg" alt="img"></p></li><li><p>老师写的：需要查询三张表，菜品表，套餐表和他们的中间关系表，不管查询多少张表，都可以用隐式内连接的方式，from后面加上表名就可以了，后面加上where指定连接条件消除无效数据（和我写的一模一样的）<img src="https://api2.mubu.com/v3/document_image/d6677dc3-5cb7-4742-8d27-c4b414fc161d-8085313.jpg" alt="img"></p></li></ul></li><li><p>需求6</p><ul><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/e7699443-95c8-4992-a05a-fd5734a13927-8085313.jpg" alt="img"></p></li><li><p>老师写的（计算所有菜品平均价格就不需要分组和指定分组条件了）</p><ul><li>合并后（子查询）<img src="https://api2.mubu.com/v3/document_image/84bf7af8-816e-471f-9846-9048c984e973-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>写需求的时候：1.先去分析这个需求涉及的表结构有哪些2.分析这两张表的数据，联查的时候他们的联查条件是什么，分析完这两点后再来完成SQL语句的编写</p></li></ul></li><li><p>tip：子查询的效率并不高，能使用连接查询代替子查询，尽量使用连接查询</p></li><li><p>小结<img src="https://api2.mubu.com/v3/document_image/5bb3ba62-2f7e-44e9-a18e-98ad565addfb-8085313.jpg" alt="img"></p></li></ul></li><li><p>MySQL-事务</p><ul><li><p>业务场景（只是假设，真实情况解散部门可能不会删员工）</p><ul><li><p>模拟解散部门：执行部门和部门关联的员工就没了<img src="https://api2.mubu.com/v3/document_image/c37adec1-a1b6-4af2-91fb-e56ce275dde2-8085313.jpg" alt="img"></p></li><li><p>测试异常情况：删除部门3及员工，但第二个SQL语句=变为==,执行，然后第二条SQL语句报错，结果是部门没了，但员工还在，此时就会出现数据不一致的情况（3号部门员工有但没有3号部门）<img src="https://api2.mubu.com/v3/document_image/c8acda74-2451-44cc-a441-6a1eb7f19deb-8085313.jpg" alt="img"></p></li><li><p>思考&amp;解决：想解决这类问题就可以借助数据库的事务<img src="https://api2.mubu.com/v3/document_image/8bf1cd36-f146-41c7-bb3a-33bdf6c6fe87-8085313.jpg" alt="img"></p></li></ul></li><li><p>事务介绍</p><ul><li><p>概念：事务是一组操作的集合，他是一个不可分割的工作单位。它是一个不可分割的工作单位。事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p></li><li><p>比如：刚才刚才执行解散部门的业务时涉及到两个操作：1.删除部门2.删除部门下的员工，由于它们属于删除部门这一个业务，那这两个操作就是一个不可分割的单位，所以它就属于一个事务，那里面涉及到的操作要么同时成功，要么同时失败</p></li><li><p>刚刚案例出现的问题：删除部门成功了，删除部门员工信息却失败了，为什么？</p></li><li><p>注意事项：默认MySQL的事务时自动提交的，也就是说，当执行一条DML语句，MySQL会立即隐式的提交事务（也就是说刚才执行的delete语句分别是两个事务）</p></li><li><p>解决：将两步操作控制在一个事务范围内，将涉及到数据库中的事务控制</p></li></ul></li><li><p>操作：事务控制</p><ul><li><p>开启事务：short transaction; / begin;(这组事务都提交成功后才能提交事务)</p></li><li><p>提交事务：commit;（把这次所执行的这些操作真正的提交到数据库来修改表结构中的数据）</p></li><li><p>回滚事务：rollback;（当这组操作有任何一个操作失败，此时就要回滚事务，把数据恢复到之前的样子）</p></li><li><p>开启事务后再执行SQL语句不会真正改变表结构：</p><ul><li><p>代码<img src="https://api2.mubu.com/v3/document_image/64f4ce87-8a03-4a84-b075-822dd87e69de-8085313.jpg" alt="img"></p></li><li><p>表结构没有发生变化<img src="https://api2.mubu.com/v3/document_image/7979267b-fc4b-4ebc-9622-39b3e3555be8-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/8817196a-425b-447f-b243-fcae973e19b2-8085313.jpg" alt="img"></p></li><li><p>但是查询后发现3号部门及其员工都已经被删除，只不过这个操作还没正式提交，所以在别的窗口中看到的这个数据依然是存在的，因为这个事务和别的窗口其实也相当于是一个事务，它是相互隔离的<img src="https://api2.mubu.com/v3/document_image/0d24d3e7-9216-445e-9786-f72db012c202-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/d7cfa9d9-81e7-4d5a-bd4a-132c1f2e38b7-8085313.jpg" alt="img"></p></li></ul></li><li><p>只有在提交事务后表结构才会发生变化，就能在别的窗口看到了（正常情况）</p><ul><li><img src="https://api2.mubu.com/v3/document_image/7e28d139-e4f0-41ac-a60a-94b8940abcad-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/0280a677-ab70-4cad-8021-8bc9a548a571-8085313.jpg" alt="img"></li></ul></li><li><p>异常情况测试：删除2号部门及员工，但删部门有语病</p><ul><li><p>这时候会出现一个SQL语句的报错，这时候不能再执行commit操作了，因为commit是所有操作都执行成功之后再执行的提交事务<img src="https://api2.mubu.com/v3/document_image/6ecaa866-a091-4220-ac2f-ab2dcdf59c2b-8085313.jpg" alt="img"></p></li><li><p>只要有一个操作执行失败，我们要执行的是rollback回滚事务</p></li><li><p>在这之前，先执行两条语句查询一下两张表的表结构，可以看到2号部门删了，但2号部门员工没有删<img src="https://api2.mubu.com/v3/document_image/33b52122-f621-4ead-87c3-0fa28528aef8-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/45cef190-16ea-4f31-8467-2d8aaff76232-8085313.jpg" alt="img"></p></li><li><p>执行回滚事务后再次查询部门表，发现2号部门恢复过来了<img src="https://api2.mubu.com/v3/document_image/7578f035-eff2-4ea3-88ac-9276b3df83e8-8085313.jpg" alt="img"></p></li></ul></li><li><p>这样就可以在发现一旦出现异常之后，我们就可以通过rollback将删除的数据再恢复过来，从而保证了操作前后数据是一致的，这就是事务，一组操作要么同时成功，要么同时失败</p></li></ul></li><li><p>四大特性（ACID，首字母缩写）</p><ul><li><p>原子性（Atomicity）：事务是不可分割的最小单元，要么全部成功，要么全部失败。</p></li><li><p>一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态（完成–&gt;提交/回滚）</p><ul><li>比如说：刚刚的部门和员工都删掉了或者部门和员工都没删，但是部门删了员工没删就叫数据不一致了</li></ul></li><li><p>隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响下的独立环境运行</p><ul><li><p>比如说刚刚只要事务还没提交，窗口中的表结构就不会发生变化，这就是隔离性的体现</p></li><li><p>而这个隔离性我们可以通过隔离级别设置，隔离性越高，事务越安全，但是效率也就越低</p></li></ul></li><li><p>持久性（Durability）：事务一旦提交或回滚，他对数据库中的数据的改变就是永久的</p><ul><li>一个事务提交或是回滚了，把数据库关闭了，下次打开，数据库仍旧是提交或者回滚后的数据</li></ul></li></ul></li><li><p>小结<img src="https://api2.mubu.com/v3/document_image/519dc555-0b33-48a7-b914-863a62e7b411-8085313.jpg" alt="img"></p></li></ul></li><li><p>MySQL-索引</p><ul><li><p>索引-介绍：</p><ul><li><p>现象：查询一条记录，耗时了十三秒多</p><ul><li><p>原因：这张表的数据量比较大，可以用count(*)查询记录条数：600万，一旦某张表的数据量变大，它的查询效率也会变低，数据量越大，查询数据越低<img src="https://api2.mubu.com/v3/document_image/8eb23bb4-0d4e-471d-a8e0-f64a73e8645d-8085313.jpg" alt="img"></p></li><li><p>优化以提升查询效率：为skn表的sn字段建立索引就好了，一次性将600万个数据的索引创建建好了，耗时了45秒（不用每次都构建），之后在查询只用了6ms，将查询速度提升了几千倍，这就是索引的魅力<img src="https://api2.mubu.com/v3/document_image/27be15ff-5f16-4f9e-8057-fee7e266e3dd-8085313.jpg" alt="img"></p></li></ul></li><li><p>概念：索引（index）是帮助数据库高效获取数据的数据结构。</p></li><li><p>没有索引的查询方式：拿着查询数据和所有数据一个个进行比较，在没找到的情况下从头找到尾，也称之为全表扫描（效率低，而且数据量越大，查询效率越低）<img src="https://api2.mubu.com/v3/document_image/64f3972a-81b6-4d81-a7da-470f3d808e2a-8085313.jpg" alt="img"></p></li><li><p>有索引的情况：为age字段建立一个索引，他就会维护一个索引对应的数据结构，提高查询效率（比如说二叉搜索树：第一个数放根节点，比根节点大的数放在右边，比根节点小的数放在左边，以此提升查询效率）（真正的索引结构不是这个样子，这只是一个示意图）<img src="https://api2.mubu.com/v3/document_image/aee8e5a0-d4ef-44b8-be27-3b2afd524319-8085313.jpg" alt="img"></p></li><li><p>索引的优点（简单来说就是提升查询和排序的效率）</p><ul><li><p>1.提高数据查询的效率，降低数据库的IO成本。</p></li><li><p>2.通过索引对列数据进行排序，降低数据排序的成本，降低CPU消耗</p></li></ul></li><li><p>索引的缺点</p><ul><li><p>1.索引会占用存储空间</p><ul><li>在mysql中的数据存放目录，其解压目录下的data目录就是数据库的数据文件，里面每一个文件夹就对应一个数据库，一个数据库里的文件就对应一张表，数据库db04中有tb_sku这张表，数据库文件中也会有tb_sku.ibd这个文件，这个文件存放的就是这张表对应的的数据以及索引的信息<img src="https://api2.mubu.com/v3/document_image/ea010a40-1d55-4375-b7eb-7d72f8128a67-8085313.jpg" alt="img"></li></ul></li><li><p>2.索引大大提升了查询效率，同时却也降低了insert、update、delete的效率。</p><ul><li>增删改使数据发生变化了，就需要重新维护这个索引的数据结构，这就会降低增删改的效率，比如说插入age88，在索引结构也要增加88这个节点</li></ul></li></ul></li><li><p>但是在优点面前，这两个缺点就可以忽略不计了</p><ul><li><p>1.因为对现在的企业来说，这个磁盘空间就不用多虑了，而且索引本身所占的磁盘空间也不会很大</p></li><li><p>2.对于一个正常的业务系统来说，查询会占到90%以上，增删改的频率本来就很低了，所以在业务操作时我们主要考虑的时查询性能的优化</p></li></ul></li></ul></li><li><p>索引-结构：</p><ul><li><p>MySQL数据库支持的索引结构有很多，如：Hash索引、B+Tree索引、Full-Text索引等。我们平常所说的索引，如果没有特别指明，都是指默认的B+Tree结构组织的索引。</p></li><li><p>二叉搜索树当中，左子树的所有数据都是小于根节点的，右子树的所有数据都是大于根节点的，而且根节点的左右两个子树又都是一个二叉搜索树。那它就很容易出现偏向一边的情况，如果保存数据时是跟数据数据的从大到小或从小到大来保存的，那就会将二叉树绘画成一个单向列表，此时它的性能就会大打折扣，此时可以用平衡二叉树或者红黑树（也是平衡二叉树）来解决这个问题。<img src="https://api2.mubu.com/v3/document_image/42613b4b-428b-41b0-9f9e-85f9d4bdc6fa-8085313.jpg" alt="img"></p></li><li><p>但MySQL数据库没有采用平衡二叉树和红黑树作为索引结构，因为它们在大数据量情况下，会出现层级深，检索速度慢的问题（一个结点只能有两个子节点，大数据量情况下必然会加深树的速度，查询速度就会变慢）</p></li><li><p>B+Tree（多路平衡搜索树）</p><ul><li><p>特点：1.每个节点都能存储多个key，不像二叉树，每个结点只能存储两个key，B+树中，存储了多个key，就会有多个key的指针，每一个指针会指向一个磁盘块（也叫页：数据库进行磁盘管理的最小单位，一个页的大小是16kb）</p></li><li><p>有n个key，就会有n个指针，就会有多个子节点，这多个子节点也就是我们所说的多路</p></li><li><p>2.最底下这层我们称之为叶子节点，而上面两层称之为非叶子节点，B+树中的非叶子节点仅仅起到索引数据查找数据的作用，它并不保存数据，所有的数据都是在叶子节点部分（绿色部分）来保存的，所有的key也都会出现在叶子节点，比如说根节点的key：6、28、67，在叶子节点中都有<img src="https://api2.mubu.com/v3/document_image/88678227-076d-41c8-9bc5-974153d4ab6e-8085313.jpg" alt="img"></p></li><li><p>3.由于B+树是一个多路平衡搜索树，所以他的叶子节点元素都是按照元素的从小到大的顺序来排序的，而且叶子节点形成了一个双向链表，我们可以由上一个元素找到下一个元素，由下一个元素找到上一个元素</p></li><li><p>B+树的数据查询：比如说53，1.首先和根节点进行对比，在与根节点进行对比时，内部会采用二分查找的方式来进行操作，直接定位53在38到67的区间范围内（53&gt;=38 &amp; 53&lt;67），所以它会走p2这个指针，p2指向中间的磁盘块，2.之后它会在查找这个磁盘块的数据，再来对比53在哪个区间范围之内，是介于44到59这个范围内的，之后他又会走这个磁盘块中的p2这个指针，而这个指针又指向下面这个磁盘块，所以又会到下面的磁盘块来寻找，最终找到这个磁盘块中的53并获取到对应的数据<img src="https://api2.mubu.com/v3/document_image/394ccac7-f87e-4a35-bf20-d792c7c95539-8085313.jpg" alt="img"></p></li><li><p>再比如说查询29：[6,38)–&gt;p1–&gt;[29,…)–&gt;p3–&gt;最终定位到29和29对应的数据（此时发现只需要进行三次io就能查找到数据）<img src="https://api2.mubu.com/v3/document_image/15b196ee-bd17-4a86-a6e0-cb43c5437ec4-8085313.jpg" alt="img"></p></li><li><p>总结：1.每一个结点可以有n个key，n个key对应n个指针，n个指针意味着一个结点可以有多个子节点，相对于红黑树/平衡二叉树，相同数据量的情况下，它的树的高度就会低的多，所以mysql中的B+树的索引，最终形成的是一个矮胖矮胖的树，树的层级可能在3-4层 2.不管查找哪条数据，都要找到叶子结点才能拿到对应的数据，这样就能保证数据库服务器的查询性能比较稳定3.叶子节点的元素形成了一个有序的双向列表，便于数据的排序和区间范围的查询</p></li></ul></li></ul></li><li><p>索引-语法：</p><ul><li><p>创建索引：create [ unique ] index 索引名 on 表名(字段名,…);（指定为哪张表的哪些字段创建索引xx，如要创建唯一索引，需要在index前加上unique）</p><ul><li>索引名的一般命名规范：idx_emp（表名）_name（字段名）</li></ul></li><li><p>查看索引：show index from 表名;（查看这张表的所有索引信息）</p><ul><li>查询出来3个索引：1.第一个是id，是这张表的主键，一旦指定了id是某一张表的主键，它就会自动创建一个索引，我们叫它主键索引，而且主键索引的性能是最高的2.第二个建立索引的字段是username，这个索引建立的原因是我们之前给这个字段添加了唯一约束，一旦我们指定这个字段是唯一的，他就会为这个字段创建一个唯一索引（unique index），所以添加唯一约束本质上是添加了一个唯一索引<img src="https://api2.mubu.com/v3/document_image/442a9e0d-1729-44ab-8df8-44b5a14ad4d8-8085313.jpg" alt="img"></li></ul></li><li><p>删除索引：drop index 索引名 on 表名;（删除这张表的这个索引）</p></li><li><p>代码</p><ul><li><img src="https://api2.mubu.com/v3/document_image/339118fa-5959-4ca7-ab56-de62bf4e86ef-8085313.jpg" alt="img"></li></ul></li><li><p>注意事项</p><ul><li><p>主键字段，在建表时，会自动创建主键索引。</p></li><li><p>添加唯一约束时，数据库实际上会添加唯一索引</p></li></ul></li></ul></li><li><p>小结<img src="https://api2.mubu.com/v3/document_image/176fc962-076c-45d8-aa65-55aea232a8f1-8085313.jpg" alt="img"></p></li></ul></li><li><p>MyBatis-入门</p><ul><li><p>什么是MyBatis？</p><ul><li><p>MyBatis是一款优秀的持久层框架，用于简化JDBC的开发（持久层就是web开发三层架构中的dao数据访问层：与数据库打交道的）</p><ul><li>JDBC：sun公司提出的JavaEE13项规范之一，是sun公司提供的用来操作数据库的一套规范，但是直接使用底层的JDBC来操作数据库会非常繁琐，现在基本上使用的都是Mybatis这样的框架来简化JDBC的开发</li></ul></li><li><p>MyBatis本是Apache的一个开源项目iBatis，2010年这个项目由apache迁移到了google code，并且改名为MyBatis。2013年11月迁移到Github。</p></li><li><p>官网：<a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p></li></ul></li><li><p>MyBatis课程学习安排</p><ul><li>三个部分：1.通过入门程序体验MyBatis是如何操作数据库的和MyBatis的开发流程2.MyBatis基础增删改查（基本功，项目中使用频次最高）3.Mybatis的高级科技：动态SQL。我们直接使用SpringBoot去整合MyBatis（因为现在企业中绝大部分的项目都是基于SpringBoot构建的，这也是且也开发中最为普遍，最为主流的方式）</li></ul></li><li><p>MyBatis-快速入门程序</p><ul><li><p>需求：使用Mybatis查询所有用户数据</p></li><li><p>图形化界面查询：执行select * from user;</p><ul><li><img src="https://api2.mubu.com/v3/document_image/6d5f14c6-3674-41a7-a03b-867312b93146-8085313.jpg" alt="img"></li></ul></li><li><p>其实Mybatis和图形化界面查询的底层逻辑是一样的</p><ul><li><p>图形化工具操作数据库：在图形化界面编写SQL语句，然后将这条sql语句发送给数据库服务器来执行，数据库再将结果返回给图形化界面工具<img src="https://api2.mubu.com/v3/document_image/f4efca08-027b-46c7-beb0-cb48840840da-8085313.jpg" alt="img"></p></li><li><p>而MyBatis操作数据库其实就是在Java程序中来编写这条SQL语句，然后将这条sql语句发送给数据库执行，数据库再将结果返回给Java程序<img src="https://api2.mubu.com/v3/document_image/dbed3194-c030-4af2-903a-b1deeb505bf1-8085313.jpg" alt="img"></p></li></ul></li><li><p>步骤</p><ul><li><p>1.准备工作（创建springboot工程、数据库表user、实体类User）</p><ul><li>实体类表是用来封装用户信息的，在图形化界面工具，数据库会将查询结果返回，之后工具再以表格的形式呈现出来，而在Java程序中，SQL语句执行完毕后，会将结果返回给Java程序，那Java程序就要将返回的结果封装起来，其中返回的每个数据我们都会将其封装为User对象，表中的字段最终会自动封装到对象当中，所以在入门程序中建议命名属性名时和字段名保持一致，这样框架就可以完成自动封装</li></ul></li><li><p>2.引入Mybatis的相关依赖，配置Mybatis</p><ul><li><p>因为我们现在操作的是MySQL数据库，所以引入的依赖除了Mybatis框架（MyBatis Framework）还有MySQL的驱动（MySQL Driver），那将来如果操作的时Oracle，那就得引入Oracle的驱动，由于我们创建的是SpringBoot工程，所以只要在创建工程时勾选mybatis的依赖和mysql驱动的依赖就可以了，配置MyBatis还要配置数据库连接信息</p></li><li><p>图形化界面连接数据库：点击database菜单的+号，选择要链接的数据库（mysql），看似很多，其实只有四项：</p><ul><li><p>1.Driver：指定数据库驱动类的类名，如果要连接的是MySQL数据库，那这个类名是固定的，就是com.mysql.cjjdbc.Driver(点进去蓝色带下划线的MySQL)<img src="https://api2.mubu.com/v3/document_image/ecef4a82-28e6-4e85-a5ff-45892b60e55d-8085313.jpg" alt="img"></p></li><li><p>2.数据库连接的URL：这个url前面的部分：jdbc:mysql://，这一部分是固定的，是协议部分，协议之后的部分指定我们当前要链接的是哪一个数据库服务器，<a href="http://localhost/">localhost</a>代表的是本机，3306指定的是数据库服务器的端口号，后面加上/mybatis代表我们要连接的是这个数据库服务器当中的哪一个数据库，mybatis是一个数据库的名字(图形化界面为了让信息展现的更加直观，操作的更加方便，将url中的主机地址，端口号以及数据库的名字这三个部分又单独的在上面展示出来了，分别是host，port，database)<img src="https://api2.mubu.com/v3/document_image/421ab2bc-0c21-4f45-8bc6-57c46a572b96-8085313.jpg" alt="img"></p></li><li><p>3+4：User和Password：数据库访问的用户名和密码</p></li></ul></li><li><p>Mybatis操作数据库的方式和图形化工具操作数据库的方式底层是一样的，所以在Mybatis操作数据库时，也需要配置数据库连接的这四项信息：驱动器的全类名，数据库的url，用户名和密码。这四样信息也称为数据库连接的四要素，由于我们使用的是SpringBoot整合MyBatis，所以这四项信息需要配置在springboot默认的配置文件appplication.properties，而properties的配置方式就是key=value，等号之前是属性名，等号之后是属性值</p></li></ul></li><li><p>3.编写SQL语句（注解/XML）</p><ul><li><p>方式1：基于注解来定义（入门阶段采用）</p><ul><li>按照MyBatis的规范，我们需要定义一个接口叫UserMapper，并且在接口上加上@ Mapper注解来表示当前接口时Mybatis当中的一个持久层的接口（三层架构中的数据访问层：dao层的接口，也可以叫userdao，但是在Mybatis当中，我们一般都叫Mapper，所以也叫Mapper接口），然后再再接口当中加上一个注解@Select，来指定当前是一个查询操作，再在注解当中指定要执行的SQL语句，而最终我们想要执行这条SQL语句，只要执行UserMapper的list()方法即可，此时框架就会自动执行这条SQL语句，并将SQL语句的查询结果封装到方法的返回值中</li></ul></li><li><p>方式2：基于XML来定义</p></li></ul></li><li><p>图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/ee713fc0-73ad-426d-81d9-2aff626ff83f-8085313.jpg" alt="img"></li></ul></li><li><p>说明：在MyBatis的开放中，只需要定义Mappper接口就可以了，不需要定义其实现类，因为程序在运行时，框架底层会自动生成这个接口的实现类对象</p></li></ul></li><li><p>操作思维导图Day08MySQL-多表查询MySQL-事务MySQL-索引MyBatis-入门什么是MyBatis？MyBatis课程学习安排MyBatis-快速入门程序需求：使用Mybatis查询所有用户数据图形化界面查询：执行select * from user;其实Mybatis和图形化界面查询的底层逻辑是一样的步骤</p><ul><li><p>1.file，new moudle，spring initializr，填写Group组织名（com.itheima）、Artifact模块名（springboot-mybatis-quickstart），包名后面不需要删掉，老师用的是11，Location是创建目录，确认没有问题后，点击next，这里可以选择springboot的版本，老师使用的是当时最新版2.7.5，Dependencies的SQL栏下直接选择MyBatis相关依赖（MyBatis Framework和MySQL Driver），点击finish后他就会自动联网创建并下载相关依赖，保留src文件夹和pom.xml，其他删掉，保持工程的简洁<img src="https://api2.mubu.com/v3/document_image/f90c29df-b553-46cb-8226-2eb2cbf842e8-8085313.jpg" alt="img"></p></li><li><p>双击pom文件查看引入进来的依赖：首先，所有的springboot项目都有一个父工程，其中指定了springboot的版本1.mybatis-spring-boot-starter：mybatis的起步依赖2.mysql-connector-j：mysql驱动包（这是刚刚发布的最新版本的驱动包，后面的项目开发中可能会用到的另外一个驱动包：坐标的组织名是mysql，ArtifactID是mysql-connecter-java，它是上一个版本的驱动包，现在的项目当中普遍使用的这个驱动包）3.spring-boot-starter-test：springboot单元测试<img src="https://api2.mubu.com/v3/document_image/f816a40c-cdc1-452d-bab6-fcae0e05ed07-8085313.jpg" alt="img"></p></li><li><p>创建user表，在资料里</p></li><li><p>com.itheima下创建pojo.User类，连包带类一次创建，pojo包专门来存放实体类，其中的属性定义与表的字段名一致，而且需要private私有化封装，推荐使用包装类，unsigned tinyint在Java中使用Short接收即可，之后再为这些字段生成getter和setter方法，还要toString方法，还要有参无参构造，快捷键生成即可（我用PTG To JavaBean）<img src="https://api2.mubu.com/v3/document_image/05d24a58-c3ee-491b-b306-3a033a1bc0ad-8085313.jpg" alt="img"></p></li><li><p>配置数据库的连接信息-四要素（比较固定，可以直接复制资料信息），在sec的resources的application.properties里（数据库名字和用户密码要改成自己的）</p><ul><li><img src="https://api2.mubu.com/v3/document_image/5fe5e92c-4340-453e-9132-8182b53c5faf-8085313.jpg" alt="img"></li></ul></li><li><p>创建mapper包（层）和UserMapper接口<img src="https://api2.mubu.com/v3/document_image/b0126f7e-d8c7-43b8-9caf-013fc0cf09bd-8085313.jpg" alt="img"></p></li><li><p>UserMapper接口</p><ul><li><img src="https://api2.mubu.com/v3/document_image/aaf06c30-86c6-43e5-8052-8c8b4139f4cf-8085313.jpg" alt="img"></li></ul></li><li><p>按照标准的maven的项目结构来说，单元测试的代码不应该写在main目录下而在test目录下，test目录底下有个springboot工程创建好自带的类，是一个测试类，这个类上面有一个注解@SpringBootTest  :springboot整合单元测试的注解，接下来我们就可以在这个类做一个单元测试，定义方法public void testListUser()查询全部用户信息，上面加上注解@Test ，这里就可以调用UserMapper的list方法来查询全部用户信息了，但UserMapper是一个接口，不能直接new，但是此前提到过，@Mapper 注解能生成接口的实现类对象并将其交给IOC容器管理，他已经成为IOC容器中的Bean了，在单元测试中通过依赖注入即可将这个Bean对象注入进来，所以只需在测试类当中声明一个UserMapper类型的对象，在上面加上注解@Autowired 来完成依赖注入</p></li><li><p>之后就可以直接调用UserMapper的list方法来查询所有用户信息，将返回值以stream流的形式来遍历输出出来，由于这个单元测试是springboot整合的单元测试，上面加了一个注解，@SpringBootTest ，一旦加了这个注解，这个单元测试方法在运行的时候就会自动加载整个springboot环境，并且创建springboot的IOC容器，IOC容器创建好了，接下来我么们就可以通过依赖注入的形式从IOC容器中获取UserMapper类型的Bean对象，接下来就可以调用UserMapper的list方法来查询全部用户信息了</p></li><li><p>代码及正确输出六条用户信息的结果</p><ul><li><img src="https://api2.mubu.com/v3/document_image/01274a4d-56de-460b-aa90-8c2c3c496016-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>配置SQL语句编写提示</p><ul><li><p>情形：刚刚编写的sql语句在IDEA只是一个字符串，没有任何对错相关的提示，一旦出错就会报错，对开发人员极不友好</p></li><li><p>解决：配置SQL提示（23版自带，不用配）</p><ul><li>图示<img src="https://api2.mubu.com/v3/document_image/7455af6f-48bc-4943-a856-316d52b5c9b0-8085313.jpg" alt="img"></li></ul></li><li><p>但是写表名的时候不会指定表名，或者表名爆红</p><ul><li><p>产生原因：Idea和数据库没有建立连接，不识别表信息<img src="https://api2.mubu.com/v3/document_image/e20f923b-be19-427a-8684-51f9ff5ab020-8085313.jpg" alt="img"></p></li><li><p>解决方式：在Idea中配置MySQL数据库连接</p></li></ul></li><li><p>解决：与指定的数据库建立连接</p><ul><li>选择database菜单，加号，选择数据源datasource，连接SQL数据库，写上用户名密码和连接的数据库即可（可以刷新数据库）<img src="https://api2.mubu.com/v3/document_image/44d32007-c153-4254-b3d7-e31f4f45268c-8085313.jpg" alt="img"></li></ul></li><li><p>我又指定了数据库是mysql，勾选了一个id才显示的表名</p></li><li><p>现在就可以只输id打出罗列的全部字段了</p><ul><li><img src="https://api2.mubu.com/v3/document_image/dc964780-8df6-4eb2-a643-b420a95dab4d-8085313.jpg" alt="img"></li></ul></li><li><p>这样编写的SQL语句有问题编码阶段就知道了，就不用等到查询运行才发现了，降低了程序出错概率，提升了开发效率</p></li></ul></li></ul></li><li><p>JDBC介绍</p><ul><li><p>将mybatis与jdbc对比，看看mybatis到底简化了哪些jdbc的操作</p></li><li><p>JDBC：(Java DataBase Connectivity)，就是使用Java语言操作关系型数据库的一套API</p></li><li><p>Java想要操作MySQL，ORACLE这些数据库，就得通过Sun公司提供的gdbc这套API来操作，而关系型数据库有很多，不同的数据库底层实现也有非常大的差异，底层实现的方式不同，sun公司提供的操作所有关系型数据库的api-jdbc是如何实现的呢？因为sun公司提供的仅仅是一套规范，一套接口而已，它并没有提供具体的实现，而由各个数据库厂商提供接口的实现，一个数据库的底层细节和实现方式厂商最清楚，比如mysql提供mysql的实现，而我们最后操作数据库，提供jdbc提供的接口就可以了，其实就是依靠各个尝试提供的jdbc接口的实现来操作对应的数据库，它们这些实现也叫驱动，比如刚刚入门程序引入的mysql驱动，他就是mysql厂商提供的jdbc的实现</p><ul><li><img src="https://api2.mubu.com/v3/document_image/76b5dd8e-51bf-4f8c-9f9f-ba3c60d1374f-8085313.jpg" alt="img"></li></ul></li><li><p>jdbc实现</p><ul><li>演示：代码很多<img src="https://api2.mubu.com/v3/document_image/50d824b0-6158-409c-a9cd-256a26d273df-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/6eda6fcf-cc0b-4e02-bbc0-e334d6ff2c70-8085313.jpg" alt="img"></li></ul></li><li><p>连接的url，username，password容易变动,但打包好的java代码变动极不方便2.代码繁琐3.释放资源</p><ul><li><img src="https://api2.mubu.com/v3/document_image/8856b815-bdf3-466a-a400-5004726cdbf1-8085313.jpg" alt="img"></li></ul></li><li><p>mybatis怎么解决这些问题：配置在appllication.properties的配置文件中了，以后配置这块信息就不用配置java代码，直接操作配置文件就好了2.mybatis自动把查询结果封装到集合中去了，查询返回的每一条记录都会返回为一个user对象，而所有的对象都会封装到list集合中，整个过程自动化，不用谢繁琐的获取代码了3.在application.properties中配置数据库连接信息时，所有的配置项前缀都是spring.datasource，datasource翻译过来叫数据源，按这种方式连接数据库，springboot底层会自动采用数据库连接池技术来统一管理和分配这些连接，这个连接指的就是connection对象，有了连接池之后要获取对象，只需要在连接池获取一个连接，然后执行sql语句，这条sql语句执行完之后，再将这个链接归还给连接池，这样就能做到连接的复用，避免了频繁的获取连接，释放连接而造成的资源浪费</p><ul><li><img src="https://api2.mubu.com/v3/document_image/91c4691e-358d-4b18-98cc-c8ab216edc1d-8085313.jpg" alt="img"></li></ul></li><li><p>使用mybatis只要关注application.properties和mapper接口就行了</p></li></ul></li><li><p>数据库连接池</p><ul><li><p>数据库连接池是个容器，负责分配、管理数据库连接（Connection）（类似线程池）</p></li><li><p>它允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个</p></li><li><p>释放空间时间超过最大空闲时间的连接，来避免因为没有释放连接而引起的数据库连接遗漏</p></li><li><p>没有连接池，客户端执行SQL语句是怎样的</p><ul><li><p>1.首先创建一个新的连接对象</p></li><li><p>2.执行SQL语句</p></li><li><p>3.关闭连接对象释放资源</p></li><li><p>每一次都要开启一次连接，用完之后又要把这个连接关了，比较浪费资源</p></li></ul></li><li><p>有了数据库连接池：</p><ul><li><p>1.程序在启动时就会初始化一定数量的连接对象</p></li><li><p>2.客户端再在执行sql语句时就会从连接池来获取一个连接</p></li><li><p>3.获取到连接后，就会执行sql语句，sql语句执行完后，会再把连接归还给连接池</p></li><li><p>这样就做到了连接的复用，而不是每次都创建一个新的连接</p></li></ul></li><li><p>连接池还有一个功能</p><ul><li>客户端执行sql语句时，他会从连接池获取相关连接，sql语句执行完之后，再把连接归还给连接池，但如果有个别客户端获取了这个连接，这个连接是空闲状态，也就是说这个连接并没有去访问数据库，此时连接池就会检测这个连接的空闲时间，如果说这个空闲时间超过了数据库连接词当中预设的最大时间，这个连接就会释放归还给连接池，这样就可以解决某一些连接没有及时释放而导致数据库连接池当中的连接越用越少，这样就会有一个问题，再过来一个客户端发现没有连接池可用的连接，那他就会被遗漏，不被分配连接的问题</li></ul></li><li><p>优势：</p><ul><li><p>资源重用</p></li><li><p>提升系统响应速度（创建连接比较消耗资源</p></li></ul></li><li><p>实现数据库连接池</p><ul><li><p>标准接口：DataSource</p><ul><li><p>官方提供的数据库连接池接口，由第三方组织实现此接口</p></li><li><p>功能：获取连接–Connection getConnection() throws SQLException;（关键方法）</p></li></ul></li><li><p>连接池产品</p><ul><li><p>C3P0、DBCP（现在项目开发用的少）</p></li><li><p>Druid德鲁伊（阿里巴巴开源的数据库连接池项目，功能强大，性能优秀，是java语言最好的数据库连接池之一）</p></li><li><p>Hikari追光者（springboot默认），性能很高</p><ul><li><p>刚刚程序中出现的输出日志有<img src="https://api2.mubu.com/v3/document_image/307a1e86-36de-4e56-aa49-91276063f4a3-8085313.jpg" alt="img"></p></li><li><p>双击打开了源码，所有数据库连接池都实现了这个sun公司提供的DataSource接口<img src="https://api2.mubu.com/v3/document_image/d8dc0d20-922a-49b0-b13c-cb746e47f2d0-8085313.jpg" alt="img"></p></li></ul></li></ul></li><li><p>切换连接池：引入德鲁伊连接池的起步依赖(在资料里拿到坐标放入pom，刷新即可)</p><ul><li><p>1<img src="https://api2.mubu.com/v3/document_image/afd47011-ee4f-4bf4-886d-ea046b0d1d05-8085313.jpg" alt="img"></p></li><li><p>再次执行，发现控制台输出日志的连接池改变，说明连接池切换成功，<img src="https://api2.mubu.com/v3/document_image/6217d77c-718c-4f91-bdc4-36494c2b9980-8085313.jpg" alt="img"></p></li><li><p>双击搜索，点击源码，右击空白处，选择Diagrams-&gt;show diagram，发现他也实现了DataSource接口，因为所有连接池都必须要实现这个标准接口（我没有）<img src="https://api2.mubu.com/v3/document_image/533dba2b-a7a4-415d-8a2e-a168af139526-8085313.jpg" alt="img"></p></li><li><p>方式2：添加droid，也可以参考官方文档<img src="https://api2.mubu.com/v3/document_image/71b3f2d8-aaf8-4b0b-86f5-f9d47c3e82de-8085313.jpg" alt="img"></p></li></ul></li><li><p>小结</p><ul><li><img src="https://api2.mubu.com/v3/document_image/f4161cf8-86ab-4d45-800c-aae01d9991d1-8085313.jpg" alt="img"></li></ul></li></ul></li></ul></li><li><p>lombok</p></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MySQL-多表查询&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;概述&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;数据准备：将资料的sql脚本导入到本地数据库(8条dept部门表数据，17条emp员工表数据)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多表查询-介绍：从多张表查</summary>
      
    
    
    
    <category term="Computer Learning" scheme="https://starlike-daydream.github.io/categories/Computer-Learning/"/>
    
    
    <category term="database" scheme="https://starlike-daydream.github.io/tags/database/"/>
    
  </entry>
  
  <entry>
    <title>MySQL02</title>
    <link href="https://starlike-daydream.github.io/posts/f68e59c5.html"/>
    <id>https://starlike-daydream.github.io/posts/f68e59c5.html</id>
    <published>2023-12-05T08:29:09.000Z</published>
    <updated>2024-04-24T05:48:22.331Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>01.MySQL-DQL</p><ul><li><p>DQL英文全称是Data Query Language(数据查询)语言），用来查询数据库表中的记录。</p></li><li><p>关键字：SELECT</p></li><li><p>重要性：查询这个操作是数据库中最常见、重要的操作，一个正常的业务系统中，查询基本可以占据90%以上</p><ul><li><p>1.比如说CRM系统，每次点击左边的菜单栏都会发起一次或多次查询操作，点击课程管理菜单后会显示课程相关数据信息，前端只负责将数据以好看的样式展示出来，最终的数据都是在数据库中存储和管理的(比如课程中的一条数据对应着数据库表结构当中的一条记录，当我们点击课程管理菜单后，就可以将数据库表结构中的数据查询出来)<img src="https://api2.mubu.com/v3/document_image/063038da-0204-4253-a98c-7a202635343a-8085313.jpg" alt="img"></p></li><li><p>2.页面也允许用户在上面根据条件查询（比如在课程名称中输入Java，就可以查询出课程名称中含有Java关键字的课程，添加条件适用人群为小白学员，就可查询到对应数据,也可查询时间范围，对数据排序，分页展示数据加快页面加载速度，同时提高了用户使用体验）<img src="https://api2.mubu.com/v3/document_image/4ac0f5e2-a604-41e0-9aa4-086af80d3197-8085313.jpg" alt="img"></p></li></ul></li><li><p>语法：</p><ul><li><p>select 字段列表 from 表名列表 where 条件列表 group by 分组字段列表 hanving 分组后条件列表 order by 排序字段列表 limit 分页参数</p></li><li><p>基本查询：select 字段列表 from 表名列表（字段列表代表我们要查询表中的哪些字段，字段之间用逗号分隔，from后面跟上表名列表，也就是说我们可以从多张表中进行查询）</p></li><li><p>条件查询（where）：在基本查询后面可以加上where，where后面跟上条件列表（可以有多个条件）</p></li><li><p>分组查询（group by）：group by跟上要分组的字段，如果分组之后还要进行条件的筛选，还需要加上关键字having，having之后加的是分组的条件</p><ul><li>比如有一张员工表，里面有一个字段是gender性别，要想知道男性员工和女性员工各有多少人，就可以用性别字段进行分组，分完组之后再统计男性女性个多少人</li></ul></li><li><p>排序查询（order by）：order by后跟上排序的字段（支持对多个字段进行排序）</p></li><li><p>分页查询（limit）：在sql语句的后面加上一个关键字limit，limit之后跟上分页参数</p></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/07894e28-75c1-4142-adf8-1d47ddabab19-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>准备测试数据：数据库db03下操作，新建控制台mysql_02，资料DQL第一个sql脚本双击打开（其中是上节课的表，插上许多数据），cv到idea，全选执行在db02创建一张表，含29条数据</p></li><li><p>01.DQL-基本查询</p><ul><li><p>语法</p><ul><li><p>查询多个字段：select 字段1,字段2,字段3 from 表名;</p></li><li><p>查询所有字段（通配符）：select * from 表名;（不推荐：1.不直观，2.性能低）</p></li><li><p>设置别名：select 字段 [ as  别名1 ], 字段2 [ as 别名2 ] from 表名;（不需要写方括号，只代表可选）</p></li><li><p>去除重复记录：select distinct 字段列表 from 表名;</p></li></ul></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/fe110f67-cd9c-4d53-9228-630d5101e794-8085313.jpg" alt="img"></p></li><li><p>自己写的<img src="https://api2.mubu.com/v3/document_image/43f12c26-62b7-48b3-8685-46598d6a6f31-8085313.jpg" alt="img"></p></li><li><p>老师的（工作几种？最后的null代表还没有分配职位，职位一共有四种）<img src="https://api2.mubu.com/v3/document_image/76bfaec1-9b07-424e-99fc-f4314d1249c3-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips：</p><ul><li><p>1.写好select 查询的字段之后会报错，不用管，因为没有表名，他不知道指定的字段存不存在，写好from加表名就不会报错了，这些字段已经被识别出来了</p></li><li><p>2.要写多个或所有字段的话可以先打出selrct from 表名;然后再打字段列表，这样就会有字段和全部字段的提示。</p></li><li><p>3.以后写项目要查询所有字段推荐写select 字段1,字段2,… from 表名（先打出后面的），而不推荐select * from 表名：1.不直观2.性能低（课上节省时间会使用*）</p></li><li><p>4.起别名的as可以省略，但是别名中如果有空格或者特殊符号需要给别名加上引号（单引号/双引号）</p></li></ul></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/cd736532-283d-476c-8e1f-f9c44e004a1e-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>02.DQL-条件查询</p><ul><li><p>语法—条件查询：select 字段列表 from 表名 where 条件列表;</p></li><li><p>条件列表的条件可以有多个，学习条件查询主要就是学会条件的构建方式，并且SQL语句中构建条件的运算符有很多，主要分为比较运算符和逻辑运算符</p></li><li><p>比较运算符</p><ul><li><p>&gt;：大于，&gt;=：大于等于，&lt;：小于，&lt;=：小于等于</p></li><li><p>&lt;&gt; 或  != ：不等于，=：等于</p></li><li><p>between … and … ：在某个范围之内（含最小、最大值）（between后跟上最小值，and后跟上最大值）</p></li><li><p>in(…)：在in之后的列表中的值，多选一</p></li><li><p>like 占位符：模糊匹配（_匹配单个字符，%匹配任意个字符）</p></li><li><p>is null：是null</p></li></ul></li><li><p>逻辑运算符：</p><ul><li><p>and 或 &amp;&amp;：并且（多个条件同时成立）</p></li><li><p>or 或 || ：或者（多个条件任意一个成立）</p></li><li><p>not 或 ! ：非，不是</p></li></ul></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/de2cec54-d1ab-4559-bc32-5222bb14f8b4-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/6ad36574-8b67-4437-8ad5-b60daebf45ac-8085313.jpg" alt="img"></p></li><li><p>代码（我的和老师的大差不差）<img src="https://api2.mubu.com/v3/document_image/980026a9-7163-4d4c-853c-d709e9e8b3ef-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips</p><ul><li><p>1.select * from tb_emp where name = ‘杨逍’;因为name是字符串，所以杨逍也要用引号引起来</p></li><li><p>2.null只能用is判断，而不像其他数据类型用=判断</p></li><li><p>3.查询结果显示台可以看到查询到数据的条数<img src="https://api2.mubu.com/v3/document_image/fdcdefb4-e3d0-4cb3-ab18-fbfefcc3e629-8085313.jpg" alt="img"></p></li><li><p>4.并列条件and和&amp;&amp;双与的效果是一样的，只不过sql语句一般写and</p></li><li><p>5.如果有范围可以用between and 来代替&gt;= &lt;= ，日期也能用于比较运算哦</p></li><li><p>6.如果查询多个确定的值，就可以in(),里面放上这些值即可（满足其中一个即可）</p></li></ul></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/5b26cf73-26b4-4281-9b32-c5e402158baa-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>03.DQL-分组查询</p><ul><li><p>先进行聚合函数的讲解：分组查询操作一般会伴随着聚合统计进行</p><ul><li>比如说我们要根据员工的性别来进行分组，分别计算男性员工多少人，女性员工多少人，既要根据gender这个字段进行分组，还要进行分组之后的聚合统计操作，这里就会涉及到数据库中的聚合函数</li></ul></li><li><p>聚合函数：</p><ul><li><p>介绍：将一列数据作为一个整体，进行纵向计算。</p></li><li><p>语法：select 聚合函数(字段列表) from 表名;</p></li><li><p>常见聚合函数：</p><ul><li><p>count：统计数量</p></li><li><p>max：最大值</p></li><li><p>min：最小值</p></li><li><p>avg：平均值</p></li><li><p>sum：求和</p></li></ul></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/f042f426-df92-4061-bdfd-1c5ff504c317-8085313.jpg" alt="img"></p></li><li><p>代码<img src="https://api2.mubu.com/v3/document_image/d6975e77-2b0d-4ee7-93d6-5c8568f10c43-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips</p><ul><li><p>1.聚合函数不对null值进行运算，所以要统计数据数，要count非空字段，比如说name，username都是非空字段</p><ul><li><p>count员工表是id数<img src="https://api2.mubu.com/v3/document_image/488d4f47-4e72-4713-854d-4da16d2ba43a-8085313.jpg" alt="img"></p></li><li><p>count员工表job数（含一个job为null的员工）<img src="https://api2.mubu.com/v3/document_image/a87681d4-c683-47bf-8d12-1ee4e0857ccb-8085313.jpg" alt="img"></p></li></ul></li><li><p>2.count()函数参数里可以放三个类型的东西：1.count(字段)2.count(常量)3.count(*)    &lt;–推荐</p><ul><li><p>1.常量可以是数字0，1，2，3…或者是字符串’A’，只要count一个不为null的常量都可以，因为null不参与聚合函数的运算<img src="https://api2.mubu.com/v3/document_image/ab6d1290-b707-49b8-a9a8-c66a75c7ac13-8085313.jpg" alt="img"></p></li><li><p>2.<em>是通配的意思，通过</em>就可以求这取张表的总数据量，项目开发时推荐使用count(*)，因为MySQL数据库底层专门对此做了优化处理</p></li></ul></li><li><p>3.avg()求平均值的返回值是有小数的</p></li></ul></li><li><p>ppt图示<img src="https://api2.mubu.com/v3/document_image/e909ca2d-3dd5-489f-a7e1-3cf774d7f0f9-8085313.jpg" alt="img"></p></li></ul></li><li><p>分组查询–语法：select 字段列表 from 表名 [ where 条件 ] group by 分组字段名 [ having 分组后过滤条件 ];</p></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/7d881b18-abf8-4e35-9d8c-85573c408973-8085313.jpg" alt="img"></p></li><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/33797200-40db-429f-a12c-2ae16fbb264c-8085313.jpg" alt="img"></p></li><li><p>老师的代码<img src="https://api2.mubu.com/v3/document_image/81518e3f-c3cf-4279-b66a-42cfe67bdc9f-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips</p><ul><li><p>1.在分组查询的字段列表写<em>会报错，因为分组了，再写</em>就没意义了，所以这里可以写的是分组字段和聚合函数 （分组字段后返回的数据是这两类）</p></li><li><p>2.想要写分组的过滤条件，不能写在where后面，因为在where之后不能写count聚合函数，只能写在关键字having之后加上聚合函数构建的条件</p></li></ul></li><li><p>面试题：where与having的区别</p><ul><li><p>1.执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。</p></li><li><p>2.判断条件不同：where不能√聚合函数进行判断，而having可以。</p></li></ul></li><li><p>注意事项：</p><ul><li><p>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。</p></li><li><p>执行顺序：where  &gt; 聚合函数 &gt; having。</p></li></ul></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/0c817688-62f3-4113-a3e5-356bc130f460-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>04.DQL-排序查询</p><ul><li><p>语法–排序查询：select 字段列表 from 表名 [ where 条件列表 ] [ group by 分组字段 ] order by 字段1 排序方式1,字段2 排序方式2… ；</p></li><li><p>排序方式：1.ASC：升序（默认值）2.DESC：降序</p></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/53ad6b0d-4674-41f5-a555-cf3470ff5dc2-8085313.jpg" alt="img"></p></li><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/0f8f8ffb-d25c-4d72-9c27-ce47fb98e463-8085313.jpg" alt="img"></p></li><li><p>老师的代码（ASC报黄是因为多余了）<img src="https://api2.mubu.com/v3/document_image/bbad5e43-a613-4be0-938d-bed0f2c83010-8085313.jpg" alt="img"></p></li></ul></li><li><p>sql语句中只有第一个排序字段相同时，才会根据第二个排序字段进行排序</p></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/cf18e020-9277-4363-93ac-94dcd66058d6-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>05.DQL-分页查询</p><ul><li><p>场景：分页查询非常常见，如果说我们一次性查询出来的数据比较多，就会进行分页展示，以提高用户的使用体验</p><ul><li><p>比如说京东的搜索页面，它的最下方就有一个这样的分页条，数据分页之后，用户点击对应的页码，就可以加载出这一页的最新数据<img src="https://api2.mubu.com/v3/document_image/dcafa3c5-b6c7-4fec-b6a8-fd526a34dacd-8085313.jpg" alt="img"></p></li><li><p>2.再比如说CRM的课程管理菜单，用户在查看数据的时候，只需要点击对应的页码，就可以加载出这一页的数据<img src="https://api2.mubu.com/v3/document_image/a5103272-5545-46a5-871a-1adfa063bc3a-8085313.jpg" alt="img"></p></li></ul></li><li><p>语法-分页查询：select 字段列表 from 表名 limit 起始索引,查询记录数;</p><ul><li>查询语句后面加上关键字limit，limit之后指定两个分页参数，用逗号分隔（起始索引：指的是我们要从哪一条数据往后进行查询，起始索引是从零开始的。查询记录数：指的是这一页需要展示多少条数据）</li></ul></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/a1e49108-33ac-4843-b821-9ad27fcba12d-8085313.jpg" alt="img"></p></li><li><p>我的代码（×：起始页码是1，所以第一条和第二条一样，下面也是，多了，需求2，3，4起始索引应该是0，5，10）<img src="https://api2.mubu.com/v3/document_image/20522816-e319-41a3-a447-e2103d7a4235-8085313.jpg" alt="img"></p></li><li><p>修改后+查询结果展示<img src="https://api2.mubu.com/v3/document_image/9facc39c-504c-4e74-903d-afabe5f9ff82-8085313.jpg" alt="img"></p></li></ul></li><li><p>起始索引 = （页码 - 1） * 每页展示记录数</p></li><li><p>tip：查询记录数就是查询结果会展示的记录数，从起始索引开始展示，表中的每条数据的索引就是正常的序号-1</p></li><li><p>注意事项：</p><ul><li><p>1.起始索引从0开始，起始索引 = （查询页码 - 1） * 每页显示记录数。</p><ul><li>将来前端并不会把起始索引传过来，它传递的都是页码，比如说查询第1，2，3…页，传递过来后，我们需要在执行SQL语句时，把页码换算成对应的起始索引</li></ul></li><li><p>2.分页查询是数据库的方言，不同的数据库有着不同的实现，MySQL中是LIMIT。</p><ul><li>Oracle数据库是通过row number伪列配合子查询实现的</li></ul></li><li><p>3.如果查询的是第一页数据，起始索引可以省略，直接简写为limit 10。（起始索引默认为0）</p></li></ul></li></ul></li><li><p>06.DQL-案例</p><ul><li><p>案例一</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/bbfd2d7e-deb7-4a8e-aab8-de99386da44b-8085313.jpg" alt="img"></p></li><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/3229fb3d-c7d6-45cb-a007-694f66c6809f-8085313.jpg" alt="img"></p></li><li><p>写代码要看啊页面原型的需求<img src="https://api2.mubu.com/v3/document_image/31ba8776-d7d3-4f99-81f2-b344d48827fb-8085313.jpg" alt="img"></p></li><li><p>老师的代码<img src="https://api2.mubu.com/v3/document_image/675e539a-cc46-40f5-8ac1-2c6789b0f883-8085313.jpg" alt="img"></p></li><li><p>tip：1.模糊匹配可以在要模糊查询的字前后都加上%2.选中SQL语句，ctrl+Alt+L对选中SQL语句格式化3.完成案例时，一定要按照页面原型和需求文档来编写对应的SQL</p></li></ul></li><li><p>案例二</p><ul><li><p>题目： 这类的需求也叫弧形报表，就是做数据统计，然后再将统计好的数据以可视化的形式展示出来<img src="https://api2.mubu.com/v3/document_image/b85c60a2-3162-4d21-be52-ffefe7d3e348-8085313.jpg" alt="img"></p></li><li><p>分析：我们只需要统计男性员工和女性员工多少人就可以了，我们把数据统计出来后返回给前端数据，前端数据再借助一些现成的报表组件库就可以完成报表的渲染展示了</p></li><li><p>这里以ECharts为例，Echarts是百度开源的一个组件库，现在已经是Apache的孵化项目，所以域名是<a href="http://apache.org/">apache.org</a>，官网是<a href="http://echarts.apache.org/">echarts.apache.org</a>，点击所有事例就能看到Echarts给我们提供的所有报表组件（折线图/柱状图/饼状图），点开后就可以看到左侧的JS源码和右侧的效果预览图</p></li><li><p>去除底部的data的三栏数据，修改剩下两栏的name属性值，修改series的name属性值，完成了一个简单的报表<img src="https://api2.mubu.com/v3/document_image/d72ce18a-8eca-47b5-a48f-e61e8b3f6e77-8085313.jpg" alt="img"></p></li><li><p>而这部分最核心的就是数据，需要从数据库中查询出来</p></li><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/f8b8bdab-a4c5-4f32-9913-3f6d326e3554-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/a53cbc12-6046-4d8d-9aec-88fa14f1be8e-8085313.jpg" alt="img"></p></li><li><p>但是需要的是男和女字样，所以还要改成男性员工，女性员工，需要用if函数：if(条件表达式,true取值,false取值)，但是这样写表头比较长，可以跟上性别作为别名<img src="https://api2.mubu.com/v3/document_image/cebd9964-b0bc-4f56-bc6c-c857fd67774e-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/aef3d5f6-0789-49e3-90d5-c77b115fc7f9-8085313.jpg" alt="img"></p></li><li><p>第二个案例需要转化四个字样，就可以用另外一个流程控制函数case()：case 表达式 when 值1 then 结果1 when 值2 then 结果2 … else … end（类似Java的switch函数），写完打上括号起别名即可<img src="https://api2.mubu.com/v3/document_image/f37a24be-8023-4963-b5d5-eeaf55d3ee6f-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/ec16e598-d6c0-48b6-b09d-657783cc5e91-8085313.jpg" alt="img"></p></li></ul></li><li><p>案例小结图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/4b62c96e-1956-472b-b7bc-fd2577d5a685-8085313.jpg" alt="img"></li></ul></li><li><p>DQL小结</p><ul><li><img src="https://api2.mubu.com/v3/document_image/81f82f5b-2cb8-47b8-bac9-8300c46111aa-8085313.jpg" alt="img"></li></ul></li></ul></li></ul></li><li><p>02.多表设计</p><ul><li><p>概述：项目开发中，在进行数据库表结构设计时，会根据业务需求以及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，基本分为三种：</p><ul><li>电商网站中，有很多的商品数据，每个商品都有一个品牌，比如说华为或者联想，然而某一个商品也要归属于商品分类中的一类，而且一个商品有很多规格，而一种规格可能很多商品都有，业务关系错综复杂<img src="https://api2.mubu.com/v3/document_image/89d6c6f7-dfc8-483c-93cc-39925e66f840-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/bd8a8126-fe19-4815-a788-9b9056de814b-8085313.jpg" alt="img"></li></ul></li><li><p>一对多（多对一）</p><ul><li><p>需求：</p><ul><li><p>根据页面原型及需求文档，完成部门及员工模块的表结构设计（一个部门有多个员工，但一个部门只能属于一个员工）<img src="https://api2.mubu.com/v3/document_image/9eec015c-554a-48f7-bc62-6b57c0ca4ef0-8085313.jpg" alt="img"></p></li><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/eb77c2b3-9788-42a3-9f0f-7dac552fb46f-8085313.jpg" alt="img"></p></li><li><p>老师的<img src="https://api2.mubu.com/v3/document_image/46675728-47ae-4f4a-88ca-979e8675afd1-8085313.jpg" alt="img"></p></li><li><p>完善先前员工表的归属部门，类型与部门表的id一样<img src="https://api2.mubu.com/v3/document_image/3e27bcad-5a57-4b4b-91da-19d71dbaf5c3-8085313.jpg" alt="img"></p></li><li><p>这样一来，员工表的dept_id关联的就是部门表的主键，比如说2号部门是教研部<img src="https://api2.mubu.com/v3/document_image/c1a68ae4-9bbd-4625-b49a-d467b32ec8b5-8085313.jpg" alt="img"></p></li><li><p>这层关系中：部门表示一的一方，员工表示多的一方，一个部门会对应多个员工，但一个员工只能归属多个部门，所以在一对多的关系中，我们也把一的一方叫做父表，多的一方叫做子表，因为一个父亲可以有多个儿子，但一个儿子只能有有一个父亲</p></li><li><p>总结：只需要在数据库表结构中多的一方来增加一个字段关联一的一方的主键就可以了</p></li></ul></li><li><p>外键</p><ul><li><p>多表问题分析</p><ul><li><p>插入测试数据（资料第一个文件，cvINSERT语句，选中执行）</p><ul><li><img src="https://api2.mubu.com/v3/document_image/ac0f0ef2-c1be-460d-9958-ec1a65d4c56f-8085313.jpg" alt="img"></li></ul></li><li><p>删除id为一的部门学工部，但是员工表中id为一的员工依然存在</p><ul><li>图示<img src="https://api2.mubu.com/v3/document_image/9fd0e362-306f-41ce-b7ab-649b80af2114-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/89ffca44-7c3a-4504-923f-221122343e9d-8085313.jpg" alt="img"></li></ul></li><li><p>现象：部门数据可以直接删除，然而还有部分员工归属于该部门下，此时就出现了数据的不完整】不一致问题</p></li><li><p>问题原因分析：目前上述的两张表，在数据库层面，并未建立关联，所以是无法保证数据的一致性和完整性的。（刚刚只在逻辑上完成了dept_id和dept的统一，但是数据库层面并未建立任何联系）</p></li><li><p>解决办法：外键约束（我们所学的第五种约束）</p></li></ul></li><li><p>外键语法</p><ul><li><p>创建表时指定：create table 表名(    字段名     数据类型,…[constraint] [外键约束] foreign key(外键字段名) references 主表(字段名)            );</p></li><li><p>建完表后，添加外键：alter table 表名 add constraint 外键名称 foreign key(外键字段名) references 主表(字段名);</p></li></ul></li><li><p>图形化界面添加外键：（首先先恢复数据，否则会报错-数据不完整）</p><ul><li><p>1.右击子表表格，选择Modify Table修改表</p></li><li><p>2.点击上面的Foreign Keys，点击加号添加外键</p></li><li><p>\3. Name指的是要添加的外键字段名字，Target Table指的是要关联的主表</p></li><li><p>4.旁边的Colums的from填子表的要关联的字段，To填父表要关联的字段</p></li><li><p>图形化操作图示<img src="https://api2.mubu.com/v3/document_image/a5d2c79d-1cdb-4cb9-a9fd-0a6dcc4f3697-8085313.jpg" alt="img"></p></li></ul></li><li><p>表格中带蓝色钥匙字段的就是外键</p><ul><li><img src="https://api2.mubu.com/v3/document_image/db11c20b-87cc-4a5e-8952-95fcf8ca6f4c-8085313.jpg" alt="img"></li></ul></li><li><p>此时再次删掉部门表的部门会报错：不能删掉父表的一列，因为有一个外键约束（tb_emp的dept_id字段）</p><ul><li><img src="https://api2.mubu.com/v3/document_image/c18313d3-a993-4a9d-9ca0-666a81f9746d-8085313.jpg" alt="img"></li></ul></li><li><p>而删掉五号部门就可以，因为emp表中的员工没有任何一个部门关联五号部门</p></li><li><p>物理外键（用的很少，甚至禁用）</p><ul><li><p>概念：使用foreign key定义外键关联另外一张表。（刚刚添加的外键）</p></li><li><p>缺点：</p><ul><li><p>1.影响增删改效率（需要检查外键关系）。</p></li><li><p>2.仅用于单节点数据库，不适用于分布式、集群场景。（比如大项目分库分表）</p></li><li><p>3.容易引发数据库的死锁问题，消耗性能。</p></li></ul></li></ul></li><li><p>逻辑外键（业务开放中推荐使用）</p><ul><li><p>概念：在业务层逻辑中，解决外键关联（数据库层面刚刚建立的外键delete按钮直接删掉，删掉之后就没有物理外键关联了，这样就解决了物理外键的几个问题，此时就需要在业务代码中通过代码来保证数据的一致性和完整性）</p></li><li><p>通过逻辑外键，就可以很方便的解决上述问题。</p></li></ul></li></ul></li></ul></li><li><p>一对一</p><ul><li><p>案例：用户与身份证信息的关系</p><ul><li><p>一张用户信息表，基本信息（id、姓名、性别、手机号、学历）和身份信息（生日，身份证号，签发机关，有效期开始时间、结束时间），如果在业务系统中基本信息的查询频率特别高，但身份信息查询频率很低，出于查询效率的考虑，就可以将这张大表拆分成两张小表<img src="https://api2.mubu.com/v3/document_image/be8d686c-b8bc-438c-bb63-dfba8cd21ddf-8085313.jpg" alt="img"></p></li><li><p>一张是用户基本信息表(tb_user)，一张是用户身份信息表（tb_user_card），这两张表就是一对一的关系，一个用户只能关联一个身份证号，一个身份证号又只能对应一个用户，<img src="https://api2.mubu.com/v3/document_image/8663e9d5-99be-4fcb-8355-46328275d263-8085313.jpg" alt="img"></p></li><li><p>那如何在数据库层面体现一对一的关系呢，其实只要把它看作一种特殊的一对多，在任意一张表添加外键即可，这个外键要关联另外一方的主键，为了保证一对一的关系，可以为这个外键加上约束UNIQUE唯一约束，这样就保证了一个用户不能对应两个身份证<img src="https://api2.mubu.com/v3/document_image/0598056b-a7bb-425d-8cf8-8e265c048c59-8085313.jpg" alt="img"></p></li></ul></li><li><p>关系：一对一关系：多用于多表拆分，将一张表的基础字段放在一张表中，其他字段放在另一张表中，以提升操作效率</p></li><li><p>实现：在任意一方加入外键，关联另外一方的主键，并设置外键为唯一的（UNIQUE）</p></li><li><p>例如查询 白眉鹰王用户的身份证号：查询白眉鹰王的id根据用户id到身份表查询身份证号即可</p></li><li><p>此时修改身份表的用户id都为一，就会报错</p><ul><li><img src="https://api2.mubu.com/v3/document_image/5dd5c3f6-9ff1-44f1-be46-718e9cecf96f-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>多对多</p><ul><li><p>案例：学生与课程的关系</p></li><li><p>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择</p></li><li><p>但是多对多就不能像一对多或者多对多一样添加外键，因为无法在一个单元格放入多个值</p><ul><li><img src="https://api2.mubu.com/v3/document_image/80bb1067-d213-4cfc-b288-a300354f61e3-8085313.jpg" alt="img"></li></ul></li><li><p>实现：建立第三章中间表，中甲表至少包含两个外键，分别关联两方主键</p><ul><li><p>比如说查询黛绮丝，id为1的学生选修了几门课程，在学生课程关系表一目了然，courseid是123，在课程表对应Java，PHP，MySQL<img src="https://api2.mubu.com/v3/document_image/cfbc7901-65d9-4089-abe7-a10b505ddeb4-8085313.jpg" alt="img"></p></li><li><p>再比如说想看有几个学生选了Java课程，拿着Java课程的id：1取学生课程关系表寻找也能一目了然：两位位id–1和2，就可以根据这个studentid当学生表查找数据，最终就知道黛绮丝和谢逊选修了Java<img src="https://api2.mubu.com/v3/document_image/ac8689c9-2c11-45d8-a018-09827d4dd478-8085313.jpg" alt="img"></p></li></ul></li><li><p>例如</p><ul><li>建表语句：关系表通过设置外键关联了学生表和课程表（物理外键，但是项目开放中物理外键已经很少用了）<img src="https://api2.mubu.com/v3/document_image/7e8eb769-a0df-411e-a9e0-b62ed7ba8d63-8085313.jpg" alt="img"></li></ul></li><li><p>显示关系图</p><ul><li><p>ctrl多选选中三张表，选择Diagrams，再选择Show Visualization查看<img src="https://api2.mubu.com/v3/document_image/354fce4d-483f-47fc-8b64-0cda8c8a315a-8085313.jpg" alt="img"></p></li><li><p>关系图<img src="https://api2.mubu.com/v3/document_image/02b7cb7f-3d12-4ea0-9030-2dc8dc1275c3-8085313.jpg" alt="img"></p></li></ul></li></ul></li><li><p>案例</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/581b709b-15cb-4cb9-963a-9cb7d712b840-8085313.jpg" alt="img"></p></li><li><p>我写的<img src="https://api2.mubu.com/v3/document_image/4c7ca54f-94b0-4ac5-9ed2-122eb2dd14e7-8085313.jpg" alt="img"></p></li><li><p>打开资料中的苍穹外卖页面原型（管理后台：登录.html打开，点击登录进去；用户端：点餐.html打开）</p></li><li><p>介绍：餐厅的老板和员工都可以打开管理端，登录到管理后台，配置菜品分类，套餐分类等，当后台配置后，用户就可以基于微信小程序进行点餐了，</p><ul><li>点菜界面左侧是菜品分类，右侧就是该分类的菜品列表，点击加号就可以完成点餐列表<img src="https://api2.mubu.com/v3/document_image/9b568f22-3898-405a-bd5d-5f67fbea8a52-8085313.jpg" alt="img"></li></ul></li><li><p>步骤：（要掌握）</p><ul><li><p>1.阅读页面原型及需求文档，分析各个模块涉及到的表结构，及表结构之间的关系。</p></li><li><p>2.根据页面原型及需求文档，分析各个表结构中具体的字段及约束。</p></li></ul></li><li><p>1.关系分析：</p><ul><li><p>分类与菜品：一个分类可以有多菜品，但是一个菜品只能有一个分类，是一对多的关系，所以在多的一方添加外键即可，也就是分类的id<img src="https://api2.mubu.com/v3/document_image/da626559-ae42-4efa-820b-4406551eb9af-8085313.jpg" alt="img"></p></li><li><p>分类和套餐的关系：一个分类对应多个套餐，但是一个套餐只能有一个分类（一对多）<img src="https://api2.mubu.com/v3/document_image/4ea602c0-5037-4ba2-b17e-c212decad6f6-8085313.jpg" alt="img"></p></li><li><p>添加套餐时，冠以选择关联的菜品，那就说明一个套餐对应多个菜品，但是一个菜品也能添加在不同的套餐中，所以菜品和套餐是多对多的关系，在数据库层面需要通过建立一张中间表来实现，中间表有两个字段，分别是两张表的主键<img src="https://api2.mubu.com/v3/document_image/428ea628-20de-4e32-828d-bd90bbcbfe03-8085313.jpg" alt="img"></p></li><li><p>最终的关系示意图<img src="https://api2.mubu.com/v3/document_image/5d01d97c-0414-4c2a-9d60-74ace5544fd0-8085313.jpg" alt="img"></p></li></ul></li><li><p>2.字段类型及约束分析：</p><ul><li><p>分类管理页面可以看到有哪些字段，往后拉能看到页面说明</p></li><li><p>基于图形化界面创建表（工作绝大多数情况下都是根据图形化界面来操作，简单方便）</p></li><li><p>一、分类表category</p><ul><li><p>1.添加主键id，类型无符号整型，主键约束，注释：主键ID</p></li><li><p>2.菜品/套餐名称限制在=字符范围：2-20字符，变相的说明了该字段是非空的，页面原型和需求中没有说明分类是唯一的，我们不确定的话可以找产品经理做一个确认，有可能没有清晰表示出来，确定好这个字段是唯一的，就勾选上unique唯一约束，有不清楚的字段一定要确认，非空，这里先加上唯一约束</p></li><li><p>3.分类类型只有两类，直接用标识代替即可（无符号小范围整数），非空</p></li><li><p>5.状态就两个值，要么启用，要么停用，这里用tinyint类型，无符号，约定0是停用，1是启用，默认就为0，需要勾上非空，有默认值，而且二选一</p></li><li><p>6.最后添加两个基础字段create_time创建时间和update_time修改时间，非空，类型为datetime，至此建好了分类表<img src="https://api2.mubu.com/v3/document_image/1135a38d-13c3-4034-9a0e-d7dc9f54de3b-8085313.jpg" alt="img"></p></li></ul></li><li><p>二、菜品表dish（字段说明在新建菜品中，口味选择暂不考虑）（这里用的逻辑外键）</p><ul><li><p>1.菜品分类关联分类表的主键：category_id,类型与分类表主键类型一致–int unsigned</p></li><li><p>2.价格长度限制在8位，还有两位小数，那就用deciaml(8,2)：总共8位，保留两位小数</p></li><li><p>3.图片并非储存图片，而是图片的存储路径，而且长度比较长，用varchar(300)<img src="https://api2.mubu.com/v3/document_image/e9ae6496-5c49-4653-b5f2-73b88b4b2f57-8085313.jpg" alt="img"></p></li></ul></li><li><p>三、套餐表setmeal（字段说明在新建套餐页面中）（完成此表即建立好了分类和菜品，分类和套餐的关系）</p><ul><li>套餐菜品在中间表创建，不在套餐表创建<img src="https://api2.mubu.com/v3/document_image/401691d7-1e2c-4f5b-8df7-6ffabc571e87-8085313.jpg" alt="img"></li></ul></li><li><p>套餐菜品关系表setmeal_dish</p><ul><li><p>基础字段id主键要有</p></li><li><p>关联的两张表的主键，setmeal_id字段和dish_id字段</p></li><li><p>但是还有一个份数字段需要添加，因为在添加套餐时需要指定添加菜品份数，用tinyint unsigned即可<img src="https://api2.mubu.com/v3/document_image/a3846dea-c0aa-41b7-904b-7f6a198ee99e-8085313.jpg" alt="img"></p></li><li><p>这里中间表就不用添加create_time和update_time的基础字段了<img src="https://api2.mubu.com/v3/document_image/039528d9-ccfc-4cb8-ad61-8a48bf945931-8085313.jpg" alt="img"></p></li></ul></li></ul></li><li><p>最后梳理一下这四张表的关系：</p><ul><li><p>1.分类表与菜品表是一对多的关系，一个分类下对应多个菜品，菜品表中有个外键字段category_id，关联的就是分类表的主键<img src="https://api2.mubu.com/v3/document_image/946d676f-8247-4b13-be71-f22fb4849b64-8085313.jpg" alt="img"></p></li><li><p>2.分类表与套餐表也是一对多的关系，一个分类下对应多个套餐，所以套餐表中有个外键字段category_id，关联的就是分类表的主键<img src="https://api2.mubu.com/v3/document_image/075b8f12-67c3-4f9b-9eab-1f86916a6700-8085313.jpg" alt="img"></p></li><li><p>3.而对于菜品和套餐是多对多的关系，所以建立了一张套餐菜品的中间表，中间表就记录了每一个套餐管理练的菜品和这个关联的菜品的份数</p></li></ul></li></ul></li><li><p>小结</p><ul><li>一对一可以添加外键unique保证唯一性<img src="https://api2.mubu.com/v3/document_image/760d35fe-b14e-4aa1-87a7-72f9b5d7eef5-8085313.jpg" alt="img"></li></ul></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;01.MySQL-DQL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DQL英文全称是Data Query Language(数据查询)语言），用来查询数据库表中的记录。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;关键字：SELECT&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p</summary>
      
    
    
    
    <category term="Computer Learning" scheme="https://starlike-daydream.github.io/categories/Computer-Learning/"/>
    
    
    <category term="database" scheme="https://starlike-daydream.github.io/tags/database/"/>
    
  </entry>
  
  <entry>
    <title>MySQL01</title>
    <link href="https://starlike-daydream.github.io/posts/6f87087f.html"/>
    <id>https://starlike-daydream.github.io/posts/6f87087f.html</id>
    <published>2023-12-05T08:27:24.000Z</published>
    <updated>2024-04-24T05:48:19.215Z</updated>
    
    <content type="html"><![CDATA[<h1>MySQL课程介绍</h1><ul><li>上一章的案例是根据xml文件来存储数据的，但是开发中会采用专业的数据库来存储数据<ul><li><img src="https://api2.mubu.com/v3/document_image/1c2f34f4-def7-4475-ad87-d917ab11a244-8085313.jpg" alt="img"></li></ul></li></ul><h2 id="1-什么是数据库？">1. 什么是数据库？</h2><ul><li><p>数据库：DataBase（DB），是存储和管理数据的仓库。</p><ul><li><p>例如CRM系统，想要修改数据，不需要动前端和服务端，只需要修改数据库中的数据即可（JavaEE–&gt;JavaEE入门到起飞）</p><ul><li><p>1.改之前+修改操作<img src="https://api2.mubu.com/v3/document_image/5359b65e-a7cc-418b-8358-7dfd681d84a1-8085313.jpg" alt="img"></p></li><li><p>2.改之后<img src="https://api2.mubu.com/v3/document_image/95209ff6-11de-4a77-8843-130666c71b7d-8085313.jpg" alt="img"></p></li></ul></li><li><p>数据库管理系统：DataBase Management System（DBMS），操纵和管理数据库的大型软件。</p></li><li><p>SQL：Structure Query Language（结构化查询语言），操作关系关系型数据库的编程语言，定义了一套操作关系数据库统一标准。</p></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/5273b812-8f9b-4df9-bcd7-65102483cbbb-8085313.jpg" alt="img"></li></ul></li></ul></li></ul><h2 id="数据库产品">数据库产品</h2><p>（不用担心没学其他数据库，因为这些关系型数据都是通过SQL语句操作的）</p><ul><li><p><img src="https://api2.mubu.com/v3/document_image/6679b198-f924-4867-a4cb-3bb829114b64-8085313.jpg" alt="img"></p></li><li><p>MySQL数据库课程安排</p><ul><li>索引是数据库优化的重要手段，具体的优化需要结合项目实践<img src="https://api2.mubu.com/v3/document_image/c938133f-f43b-4b9e-ac1a-a764d06ae709-8085313.jpg" alt="img"></li></ul></li></ul><h1>MySQL概述</h1><p>安装、配置</p><h2 id="1-下载">1.下载</h2><ul><li><p>1.安装社区版<br>- <img src="https://api2.mubu.com/v3/document_image/a3857cb5-895e-4b95-a2a1-e1c53aecf6ee-8085313.jpg" alt="img"></p></li><li><p>2.访问官网，安装MySQL Community Server的Other Download的第一条（我下的是8.0.34），然后参照课程资料的MySQL安装文档<br>- <img src="https://api2.mubu.com/v3/document_image/c7caa9d9-7baa-4211-ab1c-76db1e7b64b0-8085313.jpg" alt="img"></p></li></ul><h2 id="2-解压：解压到没有中文和空格的目录">2.解压：解压到没有中文和空格的目录</h2><h2 id="3-配置">3.配置</h2><ul><li><p>1.添加环境变量：</p></li><li><p>配置环境变量：在系统变量新建MYSQL_HOME，指定解压目录，再在PATH环境变量添加%MYSQL_HOME%\bin</p></li><li><p>验证配置成功：以管理员身份运行命令行，敲入mysql，回车，提示：Can’t connect to MySQL server on '<a href="http://localhost:3306/">localhost:3306</a>’的信息则说明配置成功</p></li><li><p>2.初始化MySQL<br>- 在管理员命令行运行指令：mysqld --initialize-insecure，之后会在解压目录生成一个data文件夹用于存放mysql的数据</p><ul><li><p>3.注册MySQL服务</p><ul><li><p>在管理员命令行运行指令：mysqld --install，回车（一定要用管理员身份）</p></li><li><p>开始菜单，输入“服务”，找到系统服务，看的MySQL一栏，说明MySQL已经注册为了系统服务，并且已经设置为了开机自动启动<img src="https://api2.mubu.com/v3/document_image/29799a8f-077f-4f34-9768-eccaf32db118-8085313.jpg" alt="img"></p></li></ul></li><li><p>4.启动MySQL服务：</p><ul><li><p>在黑框敲入：net start mysql，回车<img src="https://api2.mubu.com/v3/document_image/40c83443-443f-4277-90a5-8725221acea5-8085313.jpg" alt="img"></p></li><li><p>停止MySQL服务：net stop mysql</p></li></ul></li><li><p>5.修改默认账户密码</p><ul><li>黑框敲入mysqladmin -u root password 1234，这里的1234就是指默认管理员（即root账户）的密码，可以自行修改（提示一条不安全警告则代表修改成功）</li></ul></li></ul></li></ul><h2 id="四、登录MySQL">四、登录MySQL</h2><ul><li><p>黑框输入mysql -uroot -p1234（-u指定用户名username，-p指定密码password），出现下图且左下角为mysql&gt;，则登陆成功</p><ul><li><p>登录成功的警告信息是告诉我们在命令行显示的输出密码不安全，别人一眼就能看到，这样别人就能登陆你的数据库操作数据了，很危险</p></li><li><p>2.在黑框输入exit退出mysql，输入mysql -uroot -p（不用写密码）<img src="https://api2.mubu.com/v3/document_image/1cf48c52-6c77-40fd-9784-bbe73bc7cf11-8085313.jpg" alt="img"></p></li><li><p>在下一行的提示输入密码：1234，此时会用星号*隐藏你的密码，保证密码的安全性</p></li></ul></li></ul><h2 id="五、卸载MySQL：自行参照文档">五、卸载MySQL：自行参照文档</h2><ul><li>MySQL链接：语法:mysql -u用户名 -p密码 [-h数据库服务器IP地址 -P端口号]（后面两个参数不指定默认是本机IP127.0.0.1和mysql默认端口号3306）<ul><li><p><img src="https://api2.mubu.com/v3/document_image/0c8eb4ac-ede6-4668-a653-0ba0591d2b91-8085313.jpg" alt="img"></p></li><li><p>其实以后进入公司，数据库安装在服务器中，而且放在很稳无湿无尘配备完善网络系统、电力系统的机房稳定运行的（以便多人共享访问），这时需要MySQL的客户端远程链接这台MySQL服务器，并且项目组的其他开发人员也在连接这台MySQL服务器<img src="https://api2.mubu.com/v3/document_image/bf3fdce4-3e99-408d-b8bb-95049a76d7b0-8085313.jpg" alt="img"></p></li><li><p>在学习阶段，我们可以通过虚拟机软件vmware体验这样的企业开发方式，而且服务器其实就是一款虚拟机，我们可以在电脑安装vmware虚拟机，并且用虚拟机虚拟出一台服务器，再在虚拟机安装开发所需的各种软件<img src="https://api2.mubu.com/v3/document_image/4e9a6205-de09-40c0-a960-3336d4bded01-8085313.jpg" alt="img"></p></li><li><p>连接远程服务器的MySQL：mysql -h指定我们数据库的IP地址 -P3306（端口号） -uroot（指定连接的用户名是root） -p123（root对应密码）<img src="https://api2.mubu.com/v3/document_image/769026b1-93ec-4917-babd-96361b5ab977-8085313.jpg" alt="img"></p></li><li><p>为了操作更加方便，我们使用本机的MySQL，企业的开发使用方式先做了解即可</p></li></ul></li></ul><h2 id="MySQL数据模型">MySQL数据模型</h2><ul><li>关系型数据库（RDBMS）：建立在关系模型基础上，由多张相互链接的二维表组成的数据库。<ul><li><p><img src="https://api2.mubu.com/v3/document_image/32b358ae-f1bb-4351-810c-2b34520a20f2-8085313.jpg" alt="img"></p></li><li><p>特点1：使用表存储数据，格式统一，便于维护</p></li><li><p>特点2：使用SQL语言操作，标准统一，使用方便，可用于复杂查询</p></li><li><p>创建数据库语法：create database db01（数据库名字）</p><ul><li><img src="https://api2.mubu.com/v3/document_image/7448aa1e-4ce1-4036-aef2-fddcc01f8519-8085313.jpg" alt="img"></li></ul></li><li><p>创建数据库，可以在一个数据库创建多张表，一张表又可以创建多条数据，创建表之后会在数据库下产生一个磁盘文件</p><ul><li><img src="https://api2.mubu.com/v3/document_image/311dbfb0-e709-448d-9a86-69261ebd1afd-8085313.jpg" alt="img"></li></ul></li></ul></li></ul><h2 id="SQL简介">SQL简介</h2><ul><li><p>SQL：一门操作关系数据库的编程语言，定义所有关系型数据库的统一标准。</p><ul><li><p>通用语法：</p><ul><li><p>1.SQL语句可以单行或多行书写，以分号结尾。（show databases;）</p></li><li><p>2.SQL语句可以使用空格/缩进来增强语句的可读性。(show        databases;)</p></li><li><p>3.MySQL数据库的SQL语句不区分大小写。(SHOW DATABASES;)</p></li><li><p>4.注释：-- 注释内容 (注意：有空格)或 # 注释内容（MySQL特有）(-- show database;)</p><ul><li>2.多行注释：/<em>注释内容 <em>/       (/</em> show database;</em>/)</li></ul></li></ul></li><li><p>SQL分类</p><ul><li><p>DDL（Data Defination Language）：数据定义语言，用来定义数据库对象（数据库，表，字段）</p></li><li><p>DML（Data Manipulation Language）：数据操作语言，用来对数据库表中的数据进行增删改查</p></li><li><p>DQL（Data Query Language）：数据查询语言，用来查询数据库中表的记录</p></li><li><p>DCL（Data Control Language）：数据控制语言，用来控制语言，用来创建数据库用户，控制数据库的访问权限</p></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/fcf499c2-e500-432a-abd6-8560634090ec-8085313.jpg" alt="img"></li></ul></li><li><p>小结</p><ul><li><img src="https://api2.mubu.com/v3/document_image/bd4b199f-6681-4ce5-9a61-b2642fabc2a7-8085313.jpg" alt="img"></li></ul></li></ul></li></ul></li></ul><h1>MySQL-DDL</h1><h2 id="1-开发一个项目的流程：根据开发文档和项目原型设计">1. 开发一个项目的流程：根据开发文档和项目原型设计</h2><ul><li><p>1.数据库设计：分析各个模块涉及的表结构以及表结构之间的关系以及表结构的详细信息</p><ul><li><p>2.编码设计一个个功能，并操作第一步设计的数据库表结构完成业务的增删改查</p></li><li><p>3.项目完成后：优化-数据库优化：索引的建立，SQL的优化，分库分表等操作</p></li><li><p>图示<img src="https://api2.mubu.com/v3/document_image/656c0e23-5a94-4209-bf96-da6da33edf99-8085313.jpg" alt="img"></p></li></ul></li><li><p>DDL：DDL英文全称是Data Defination Language，数据定义语言，用来定义数据库对象（数据库、表）。</p></li><li><p>数据库</p><ul><li><p>图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/4e6159f0-433f-48df-9c87-9988ba03668a-8085313.jpg" alt="img"></li></ul></li></ul></li></ul><h2 id="2-查询">2. 查询</h2><ul><li><p>查询所有数据库：show databases;<br>- 上面的第一个是刚刚创建的数据库，下面四个是系统数据库，不要去操作（需要分号结束！）<img src="https://api2.mubu.com/v3/document_image/94500f68-83de-4580-aea6-1ac8d607bcb0-8085313.jpg" alt="img"></p><ul><li>查询当前数据库：select database();<ul><li>忘了当前在操作的数据库，就可以用这个<img src="https://api2.mubu.com/v3/document_image/ffe0d9a2-192f-47d2-b885-4502f8ea0228-8085313.jpg" alt="img"></li></ul></li></ul></li></ul><h2 id="使用：使用数据库：use-数据库名">使用：使用数据库：use 数据库名</h2><ul><li>出现数据库切换，则代表使用成功<img src="https://api2.mubu.com/v3/document_image/4b6396c5-0ed9-4f7b-9429-8eeb0e213779-8085313.jpg" alt="img"></li></ul><h2 id="创建：创建数据库：create-database-if-not-exists-数据库名">创建：创建数据库：create database [ if not exists ] 数据库名</h2><ul><li><p>数据库是不能重名的，创建了同名数据库会报错<img src="https://api2.mubu.com/v3/document_image/640e6131-8d2b-49cc-bd08-a751ec87928a-8085313.jpg" alt="img"></p><ul><li><p>加上可选项if not exists，如果数据库存在就不会执行任何操作，也不会报错，<img src="https://api2.mubu.com/v3/document_image/66c83940-a558-4b59-a3a8-b60f0fc80d26-8085313.jpg" alt="img"></p></li><li><p>如果数据库不存在就创建数据<img src="https://api2.mubu.com/v3/document_image/6d0594eb-74b8-404c-96dc-5429f9fc6276-8085313.jpg" alt="img"></p></li></ul></li></ul><h2 id="删除：删除数据库：drop-database-if-exists-数据库名">删除：删除数据库：drop database [ if exists ] 数据库名</h2><ul><li><p>图示<img src="https://api2.mubu.com/v3/document_image/9f625955-32ac-4740-9573-03b78c411add-8085313.jpg" alt="img"></p></li><li><p>如果要删除的数据库不存在就会报错，加上可选项if exists就不会报错，也不执行任何操作<img src="https://api2.mubu.com/v3/document_image/19c744cd-f4ca-4a21-b122-860bbfad947c-8085313.jpg" alt="img"></p></li><li><p>如果要删除的数据库存在就删除它<img src="https://api2.mubu.com/v3/document_image/593d6e2b-548f-419b-a336-e12ba8435647-8085313.jpg" alt="img"></p></li><li><p>注意事项：上述语法中的database，也可以替换成schema。如：create schema dab01;</p></li></ul><h2 id="3-图形化工具">3. 图形化工具</h2><ul><li><p>之前的命令行敲SQL语句，没有提示，错一个字符也不行，不会保存SQL语句历史记录，用户体验差<img src="https://api2.mubu.com/v3/document_image/322775d0-2150-4644-bca8-f50f17698c98-8085313.jpg" alt="img"></p><ul><li><p>我们要使用的DataGrip已经在IDEA中集成了<img src="https://api2.mubu.com/v3/document_image/cdd9a2cd-1595-4d36-ad55-6c91b24a1c9a-8085313.jpg" alt="img"></p></li><li><p>IDEA右侧有一栏Database就是用来操作数据库的，点击左上角加号连接数据库，选择Data Source以选择操作的数据库-&gt;MySQL<img src="https://api2.mubu.com/v3/document_image/2821f756-604c-449e-9b4d-bd1f704d76c5-8085313.jpg" alt="img"></p></li><li><p>弹出相关窗口后输入数据库连接的相关信息：Host指定连接的数据库：<a href="http://localhost/">localhost</a>指定本机端口号，Port端口号3306，User填写用户名，Password填写密码<img src="https://api2.mubu.com/v3/document_image/8b6d7fa5-bed9-4240-bdd5-314d6276db89-8085313.jpg" alt="img"></p></li><li><p>填写完毕后，点击Test Connection测试能否连接MySQL，第一次连接需要点击Download按钮下载数据库连接的驱动，测试成功后可以点击OK创建出一个数据库连接</p></li><li><p>如果database的位置放在右边不太习惯，可以左键拖动放在左边的框<img src="https://api2.mubu.com/v3/document_image/80c8387e-cbc0-422f-8094-6f7f23b1678d-8085313.jpg" alt="img"></p></li><li><p>最初只展示了一个数据库，点击1of5可以选择现实的数据库，All schemas选择所有数据库</p></li><li><p>连接创建之后会自动打开console控制台，可以执行SQL语句，选择语句点击绿色三角形或按crtl+enter执行选中语句（右击<a href="http://localhost/">localhost</a>–&gt;new–&gt;console新建控制台）<img src="https://api2.mubu.com/v3/document_image/17cd6da8-099e-4361-bdc5-6ff3d91c428c-8085313.jpg" alt="img"></p></li><li><p>但有了图形化软件，之间可以在右侧查看数据，右击<a href="http://localhost/">localhost</a>–&gt;new–&gt;schema新建数据库（其实还是执行SQL语句），<img src="https://api2.mubu.com/v3/document_image/e98fd1d6-b0a4-428f-985c-9bc89876d490-8085313.jpg" alt="img"></p></li><li><p>右击数据库选择Drop删除数据库（也是执行SQL语句）</p></li><li><p>切换数据库也不用use语句了，点击右上角的schema，选择要切换的数据库即可<img src="https://api2.mubu.com/v3/document_image/bf7fdd87-0985-4f86-a7ac-ae8a0697aea4-8085313.jpg" alt="img"></p></li><li><p>下方的output栏可以看到已执行的SQL语句记录<img src="https://api2.mubu.com/v3/document_image/ec7f4ef1-68d9-4baa-a1b0-8cede86b723c-8085313.jpg" alt="img"></p></li><li><p>找到之前的查询控制台：右击<a href="http://localhost/">localhost</a>，选择Navigation，再选择Jump to Query Console，下方的console就是之前的查询控制台，点击即可进入之前的SQL控制台，保留了之前的历史记录，右击控制台可以Rename重命名查询控制台</p></li></ul></li></ul><h2 id="表结构操作">表结构操作</h2><h3 id="创建">创建</h3><p>create table 表名[字段1 字段类型  [ 约束 ] [ comment 字段1注释],…,字段n 字段类型  [ 约束 ] [ comment 字段n注释]](comment 表注释);（方括号是可选的，可以加，也可以不加）</p><ul><li><p>varchar(20)是mysql的字符串，括号里指定字符串最地盘存储为多少位，char(1)存储单个字符<img src="https://api2.mubu.com/v3/document_image/64cdc44a-1b7a-4ec0-9184-5c90030921ca-8085313.jpg" alt="img"></p><ul><li><p>最后一个字段不能加逗号，会报错</p></li><li><p>选择的是数据库db01，表就会创建在db01数据库下<img src="https://api2.mubu.com/v3/document_image/db902bcd-51f0-4163-a554-e8c842b1f630-8085313.jpg" alt="img"></p></li><li><p>双击点开表，点击加号add row添加数据，输入数据后，点击submit，数据就会提交到数据库<img src="https://api2.mubu.com/v3/document_image/af69f26c-4210-444a-948b-47da50bda16a-8085313.jpg" alt="img"></p></li></ul></li></ul><h2 id="4-约束">4. 约束</h2><ul><li><p>我们想要id为唯一标识，但是它默认是可以重复的，这时候就需要用到约束</p><ul><li><p>概念：约束是作用在表中字段上的规则，用于限制存储在表中的数据。</p></li><li><p>目的：保证数据库中数据的正确性，有效性和完善性。</p></li><li><p>非空约束–not null：限制该字段不能为null<img src="https://api2.mubu.com/v3/document_image/778a11b0-6d61-4593-b334-64809b60f245-8085313.jpg" alt="img"></p></li><li><p>唯一约束–unique：保证字段所有的数据都是唯一、不重复的</p><ul><li>重复的键提交会报错，duplicate是重复的意思<img src="https://api2.mubu.com/v3/document_image/cebab062-133c-4b88-a505-54aa33d392bb-8085313.jpg" alt="img"></li></ul></li><li><p>主键约束–primary key(auto_increment)：主键是一行数据的唯一标识，要求非空且唯一（添加关键字auto_increment主键就会自动增长，按照最大id增长</p><ul><li><p>双击修改单个字段，主键值相同，重复同样会报错<img src="https://api2.mubu.com/v3/document_image/25ec4146-336c-4159-a813-f85b25745f8a-8085313.jpg" alt="img"></p></li><li><p>generated即代表自动生成<img src="https://api2.mubu.com/v3/document_image/02f7da87-693d-4d49-940d-50f0a9ae853f-8085313.jpg" alt="img"></p></li><li><p>根据当前表的最大id自增<img src="https://api2.mubu.com/v3/document_image/b68f9fdb-8989-4834-8bd0-dd4823230caf-8085313.jpg" alt="img"></p></li></ul></li><li><p>默认约束–default：保存数据时，如果未指定该字段，则采用默认值（设定默认值）</p><ul><li>未编辑性别提交<img src="https://api2.mubu.com/v3/document_image/a6f83f59-f034-4139-b48b-49d688ded501-8085313.jpg" alt="img"></li></ul></li><li><p>外键约束–foreign key：让两张表的数据建立连接，保证数据的一致性和完整性（至少需要两张表才能操作）</p></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/9efb50f7-0d8c-48aa-9339-d84e05fc87ba-8085313.jpg" alt="img"></li></ul></li></ul></li></ul><h2 id="5-数据类型">5. 数据类型</h2><ul><li><p>MySQL中的数据类型有很多，主要分为三类：数值类型，字符串类型，日期时间类型。</p><ul><li>数值类型:</li></ul></li><li><p>age tinyint unsigned;（年龄没有负数，节省内存而选择一字节的tinyint）score double(4,1)（总共4位数字，一位小数位）</p><ul><li><p>尽可能在业务运行的情况下选择占用磁盘小的数据类，只要能满足需求即可，这样就可以节省磁盘空间</p><ul><li><p>用得较多的是tinyint，int，bigint，浮点数用的较多的是double，如果涉及到金额计算，不允许出现精度损失（像是Java的BigDecimal，对精度要求比较高），就用decimal</p></li><li><p>字符串类型：</p></li></ul></li></ul></li><li><p>char(10)最多只能存10个字符，如果不是十个字符，也按照十个字符存储；</p></li><li><p>varchar(10)最多只能存10个字符，如果不是十个字符，按照实际长度（需要时间判断字符个数）（字符个数）存储；</p><ul><li><p>blob存储二进制数据，比如说要存储视频，音频就可以用blob后缀的数据类型，但在真实的企业开发中，音视频不会直接存储在数据库中，而会存储在专业的文件服务器，所以比较少用</p></li><li><p>text存储文本字符串，比如说长篇小说，就可以使用带text后缀的类型</p></li><li><p>示例：phone char(11)（手机号只有11位的）,username varchar(20)（用户名长度不确定）</p></li></ul></li><li><p>日期时间类型</p></li><li><p>示例：birthday date（仅仅需要记录时间）,update_time（最后一次操作，需要记录详细时间）</p><ul><li><p>案例：根据页面原型/需求创建表（设计合理的数据类型、长度、约束）</p><ul><li><p>需求：资料中的员工管理系统，右边还给出了详细的描述信息<img src="https://api2.mubu.com/v3/document_image/ce6dbd0c-2a7c-43d5-b87d-10e7d98876a8-8085313.jpg" alt="img"></p></li><li><p>实际开发中，必须要掌握图形化操作，这里采用图形化操作创建表</p></li><li><p>我的界面不太一样，但大致相同，选择带有old UI的选项就和老师的一样了（点击汽包设置注释）</p><ul><li><img src="https://api2.mubu.com/v3/document_image/b7e22cd9-ae37-4ede-9d73-08cab920abb4-8085313.jpg" alt="img"></li></ul></li><li><p>tips(归属部门现阶段暂不考虑)</p><ul><li><p>1.创建表基本有一个递增的主键id，创建时间ctreate_time，修改时间update_time</p></li><li><p>2.性别的男和女一般不写在数据库中，而用1和2表示，因为可能会有男士女士等其他表达，并且使用无符号微小整形以节省内存</p></li><li><p>3.可选择的下拉列表选项，在数据库的存储也用1234代表</p></li><li><p>4.图像存储的是图像的url，所有这里用varchar存储</p></li></ul></li><li><p>设计表的基本流程<img src="https://api2.mubu.com/v3/document_image/a6e749c8-0865-4632-977c-6790d662e18e-8085313.jpg" alt="img"></p></li></ul></li><li><p>查询</p><ul><li><p>查询当前数据库所有表：show tables;(在图形化界面用的少了，左边一目了然)<img src="https://api2.mubu.com/v3/document_image/7953061e-2f5f-4477-8fab-5f3a01412cf9-8085313.jpg" alt="img"></p></li><li><p>查询表结构：desc 表名;（图形化界面用的少了，在表的左侧）<img src="https://api2.mubu.com/v3/document_image/296750b6-40d1-4105-bdaf-048055d0f2e9-8085313.jpg" alt="img"></p></li><li><p>查询建表语句：show create table 表名;（双击展开）</p></li></ul></li></ul></li><li><p>点击表右键选择edit source也能看到这张表的建表语句（我是右击选择Navigation，选择Go to DDL）</p><ul><li><p>修改（Modify table双击字段修改）</p><ul><li><p>添加字段：alter table 表名 add 字段名 类型(长度) [comment 注释] [约束];（加号）</p></li><li><p>修改字段类型：alter table 表名 modify 字段名 新数据类型(长度);</p></li><li><p>修改字段名和字段类型：alter table 表名 change 旧字段名 新字段名 类型(长度) [comment 注释] [注释];</p></li><li><p>删除字段：alter table 表名 drop column 字段名;（减号）</p></li><li><p>修改表名：rename table 表名 to 表名;（右键表选择Rename）</p></li><li><p>代码图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/bb6d9792-c26e-4864-b94c-cda49f7acf4c-8085313.jpg" alt="img"></li></ul></li><li><p>图形化页面</p><ul><li><img src="https://api2.mubu.com/v3/document_image/fa5a380d-24d5-42c9-8aee-bb7e00ff22b2-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>删除：drop table [ if exists ] tb_emp;（右击表选择删除）</p><ul><li><p>先复制建表语句，删除该表，再执行复制的建表语句可以保留删除的表</p></li><li><p>在删除表时，表中的全部数据也会被删除。</p></li></ul></li></ul></li><li><p>小结</p><ul><li><img src="https://api2.mubu.com/v3/document_image/e5073d1b-175e-438c-8f32-607f901f19fa-8085313.jpg" alt="img"></li></ul></li></ul><h1>MySQL-DML</h1><ul><li><p>第二个部分：根据页面原型以及需求进行相关功能开发进行数据库的操作</p></li><li><p>需求：（打开资料中的登录.html查看），当添加数据时，前端会提交一个表单，我们就需要把表单中多个数据添加到数据库</p></li><li><p>DML英文全称是Data manipulation Luaguage (数据操作语言)，用来对数据库中表的数据进行增、删、改操作。</p></li></ul><h2 id="1-INSERT（添加数据）">1. INSERT（添加数据）</h2><ul><li>1.指定字段添加数据：insert into 表名(字段名1,字段名2) values(值1,值2);<ul><li><p>在刚刚的员工管理表中，直接添加username，name，gender的字段会报错，是因为之前的create_time，update_time设置了非空，用MySQL的函数now()为他们赋值即可<img src="https://api2.mubu.com/v3/document_image/8210b628-a0de-4151-92c6-44baeacfe86a-8085313.jpg" alt="img"></p></li><li><p>2.全部字段添加数据：insert into 表名 values(值1,值2,…);</p><ul><li><p>在为所有字段添加数据时，可以一一罗列出所有字段（输入第一个字段IDEA会提示），也可以不指定字段<img src="https://api2.mubu.com/v3/document_image/cc7ba9fa-4e6e-4152-b6cd-dbcdd39520a2-8085313.jpg" alt="img"></p></li><li><p>日期也用引号包裹起来，用字符串进行存储</p></li><li><p>主键ID可以设置为空，因为它是自增的</p></li></ul></li><li><p>3.批量添加数据（指定字段）：insert into 表名 (字段名1,字段名2) values (值1,值2),(值1,值2);</p><ul><li>就是单个添加数据再加上逗号括号，括号里另一条数据,(…)<img src="https://api2.mubu.com/v3/document_image/afaea8aa-f166-481f-bd7c-3b759b4aedcf-8085313.jpg" alt="img"></li></ul></li><li><p>4.批量添加数据（全部字段）：insert into 表名 values(值1,值2,…),(值1,值2,…);</p></li><li><p>注意事项</p><ul><li><p>1.插入数据时，指定的字段顺序需要与值的顺序是一一对应的。</p></li><li><p>2.字符串和日期类型的数据应该包含在引号中。</p></li><li><p>3.插入的数据大小，应该在字段规定的范围内。<img src="https://api2.mubu.com/v3/document_image/291c3e80-382a-420f-ad63-e297b7952e21-8085313.jpg" alt="img"></p></li></ul></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/be7d678f-d9d6-4132-8bed-a4f63203c214-8085313.jpg" alt="img"></li></ul></li></ul></li></ul><h2 id="2-UPDATE（更新数据）">2. UPDATE（更新数据）</h2><ul><li><p>修改数据：update 表名 set 字段名1 = 值1 , 字段名2 = 值2 , …[ where 条件];</p><ul><li><p>页面原型需求：修改数据时，先根据ID将数据查询出来，再在页面中展示出来，这个操作也叫数据回显，再选择数据进行修改<img src="https://api2.mubu.com/v3/document_image/b60c2981-b844-4ec5-a366-beb77cca4f3d-8085313.jpg" alt="img"></p></li><li><p>需求<img src="https://api2.mubu.com/v3/document_image/d80027a5-0635-42df-ac11-c3c80dba3018-8085313.jpg" alt="img"></p></li><li><p>tips：1.修改数据的同时还需要修改更新时间update_time为now()2.不加where修改表中全部数据会出现黄色的警告条，点击excute继续执行即可<img src="https://api2.mubu.com/v3/document_image/73244830-1407-470e-b685-ff96507999ad-8085313.jpg" alt="img"></p></li><li><p>ppt图示<img src="https://api2.mubu.com/v3/document_image/b5cb1378-eb78-4e15-a976-40d14e011466-8085313.jpg" alt="img"></p></li></ul></li><li><h2 id="DELETE（删除数据）">DELETE（删除数据）</h2><ul><li><p>业务场景：页面原型中表格的一项操作就是删除，当点击删除时，就会往服务端发送请求来指定删除哪一条数据，服务端接收到请求后就会操作数据库执行delete语句删除数据</p></li><li><p>delete语法（删除数据）：delete from 表名 [ where 条件 ];</p></li><li><p>需求<img src="https://api2.mubu.com/v3/document_image/22a4073a-ad47-4bf1-aa8b-47f933558ae3-8085313.jpg" alt="img"></p></li><li><p>代码<img src="https://api2.mubu.com/v3/document_image/a9c31ff5-6a0c-438f-a1c4-eadd64f6c30d-8085313.jpg" alt="img"></p></li><li><p>注意事项</p><ul><li><p>1.DELETE语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的数据。（慎重操作）</p></li><li><p>2.DELETE语句不能删除某一个字段的一个值（如果要操作，可以使用UPDATE，将该字段的值置为NULL）。</p></li></ul></li><li><p>ppt图示<img src="https://api2.mubu.com/v3/document_image/ac173ec8-caaf-4ba0-afe5-ec96366ef8b6-8085313.jpg" alt="img"></p></li></ul></li><li><p>小结</p><ul><li><img src="https://api2.mubu.com/v3/document_image/75daf552-26ac-4890-b5f1-ea505b3994c3-8085313.jpg" alt="img"></li></ul></li></ul><h1>MySQL-DQL</h1><ul><li><p>DQL英文全称是Data Query Language(数据查询)语言）,用来查询数据库表中的记录。</p><ul><li><p>关键字：SELECT</p></li><li><p>重要性：查询这个操作是数据库中最常见、重要的操作，一个正常的业务系统中，查询基本可以占据90%以上</p><ul><li><p>1.比如说CRM系统，每次点击左边的菜单栏都会发起一次或多次查询操作，点击课程管理菜单后会显示课程相关数据信息，前端只负责将数据以好看的样式展示出来，最终的数据都是在数据库中存储和管理的(比如课程中的一条数据对应着数据库表结构当中的一条记录，当我们点击课程管理菜单后，就可以将数据库表结构中的数据查询出来)<img src="https://api2.mubu.com/v3/document_image/063038da-0204-4253-a98c-7a202635343a-8085313.jpg" alt="img"></p></li><li><p>2.页面也允许用户在上面根据条件查询（比如在课程名称中输入Java，就可以查询出课程名称中含有Java关键字的课程，添加条件适用人群为小白学员，就可查询到对应数据,也可查询时间范围，对数据排序，分页展示数据加快页面加载速度，同时提高了用户使用体验）<img src="https://api2.mubu.com/v3/document_image/4ac0f5e2-a604-41e0-9aa4-086af80d3197-8085313.jpg" alt="img"></p></li></ul></li></ul></li></ul><h2 id="语法">语法</h2><ul><li><p>select 字段列表 from 表名列表 where 条件列表 group by 分组字段列表 hanving 分组后条件列表 order by 排序字段列表 limit 分页参数</p></li><li><p>基本查询：select 字段列表 from 表名列表（字段列表代表我们要查询表中的哪些字段，字段之间用逗号分隔，from后面跟上表名列表，也就是说我们可以从多张表中进行查询）</p></li><li><p>条件查询（where）：在基本查询后面可以加上where，where后面跟上条件列表（可以有多个条件）</p></li><li><p>分组查询（group by）：group by跟上要分组的字段，如果分组之后还要进行条件的筛选，还需要加上关键字having，having之后加的是分组的条件</p><ul><li>比如有一张员工表，里面有一个字段是gender性别，要想知道男性员工和女性员工各有多少人，就可以用性别字段进行分组，分完组之后再统计男性女性个多少人</li></ul></li><li><p>排序查询（order by）：order by后跟上排序的字段（支持对多个字段进行排序）</p></li><li><p>分页查询（limit）：在sql语句的后面加上一个关键字limit，limit之后跟上分页参数</p></li><li><p>准备测试数据：数据库db03下操作，新建控制台mysql_02，资料DQL第一个sql脚本双击打开（其中是上节课的表，插上许多数据），cv到idea，全选执行在db02创建一张表，含29条数据</p></li></ul><h2 id="1-DQL-基本查询">1. DQL-基本查询</h2><ul><li><p>语法</p><ul><li><p>查询多个字段：select 字段1,字段2,字段3 from 表名;</p></li><li><p>查询所有字段（通配符）：select * from 表名;（不推荐：1.不直观，2.性能低）</p></li><li><p>设置别名：select 字段 [ as  别名1 ], 字段2 [ as 别名2 ] from 表名;（不需要写方括号，只代表可选）</p></li><li><p>去除重复记录：select distinct 字段列表 from 表名;</p></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/fe110f67-cd9c-4d53-9228-630d5101e794-8085313.jpg" alt="img"></p></li><li><p>自己写的<img src="https://api2.mubu.com/v3/document_image/43f12c26-62b7-48b3-8685-46598d6a6f31-8085313.jpg" alt="img"></p></li><li><p>老师的（工作几种？最后的null代表还没有分配职位，职位一共有四种）<img src="https://api2.mubu.com/v3/document_image/76bfaec1-9b07-424e-99fc-f4314d1249c3-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips：</p><ul><li><p>1.写好select 查询的字段之后会报错，不用管，因为没有表名，他不知道指定的字段存不存在，写好from加表名就不会报错了，这些字段已经被识别出来了</p></li><li><p>2.要写多个或所有字段的话可以先打出selrct from 表名;然后再打字段列表，这样就会有字段和全部字段的提示。</p></li><li><p>3.以后写项目要查询所有字段推荐写select 字段1,字段2,… from 表名（先打出后面的），而不推荐select <em>from 表名：1.不直观2.性能低（课上节省时间会使用</em>）</p></li><li><p>4.起别名的as可以省略，但是别名中如果有空格或者特殊符号需要给别名加上引号（单引号/双引号）</p></li></ul></li><li><p>ppt图示</p><ul><li><img src="https://api2.mubu.com/v3/document_image/cd736532-283d-476c-8e1f-f9c44e004a1e-8085313.jpg" alt="img"></li></ul></li></ul></li><li><p>DQL-条件查询</p><ul><li><p>语法—条件查询：select 字段列表 from 表名 where 条件列表;</p></li><li><p>条件列表的条件可以有多个，学习条件查询主要就是学会条件的构建方式，并且SQL语句中构建条件的运算符有很多，主要分为比较运算符和逻辑运算符</p></li><li><p>比较运算符</p><ul><li><p>&gt;：大于，&gt;=：大于等于，&lt;：小于，&lt;=：小于等于</p></li><li><p>&lt;&gt; 或  != ：不等于，=：等于</p></li><li><p>between … and … ：在某个范围之内（含最小、最大值）（between后跟上最小值，and后跟上最大值）</p></li><li><p>in(…)：在in之后的列表中的值，多选一</p></li><li><p>like 占位符：模糊匹配（_匹配单个字符，%匹配任意个字符）</p></li><li><p>is null：是null</p></li></ul></li><li><p>逻辑运算符：</p><ul><li><p>and 或 &amp;&amp;：并且（多个条件同时成立）</p></li><li><p>or 或 || ：或者（多个条件任意一个成立）</p></li><li><p>not 或 ! ：非，不是</p></li></ul></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/de2cec54-d1ab-4559-bc32-5222bb14f8b4-8085313.jpg" alt="img"><img src="https://api2.mubu.com/v3/document_image/6ad36574-8b67-4437-8ad5-b60daebf45ac-8085313.jpg" alt="img"></p></li><li><p>代码（我的和老师的大差不差）<img src="https://api2.mubu.com/v3/document_image/980026a9-7163-4d4c-853c-d709e9e8b3ef-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips</p><ul><li><p>1.select * from tb_emp where name = ‘杨逍’;因为name是字符串，所以杨逍也要用引号引起来</p></li><li><p>2.null只能用is判断，而不像其他数据类型用=判断</p></li><li><p>3.查询结果显示台可以看到查询到数据的条数<img src="https://api2.mubu.com/v3/document_image/fdcdefb4-e3d0-4cb3-ab18-fbfefcc3e629-8085313.jpg" alt="img"></p></li><li><p>4.并列条件and和&amp;&amp;双与的效果是一样的，只不过sql语句一般写and</p></li><li><p>5.如果有范围可以用between and 来代替&gt;= &lt;= ，日期也能用于比较运算哦</p></li><li><p>6.如果查询多个确定的值，就可以in(),里面放上这些值即可（满足其中一个即可）</p></li></ul></li><li><p>ppt图示<img src="https://api2.mubu.com/v3/document_image/5b26cf73-26b4-4281-9b32-c5e402158baa-8085313.jpg" alt="img"></p></li></ul></li></ul><h2 id="2-DQL-分组查询">2. DQL-分组查询</h2><ul><li>先进行聚合函数的讲解：分组查询操作一般会伴随着聚合统计进行<ul><li><p>比如说我们要根据员工的性别来进行分组，分别计算男性员工多少人，女性员工多少人，既要根据gender这个字段进行分组，还要进行分组之后的聚合统计操作，这里就会涉及到数据库中的聚合函数</p></li><li><p>聚合函数：</p><ul><li><p>介绍：将一列数据作为一个整体，进行纵向计算。</p></li><li><p>语法：select 聚合函数(字段列表) from 表名;</p></li><li><p>常见聚合函数：</p><ul><li><p>count：统计数量</p></li><li><p>max：最大值</p></li><li><p>min：最小值</p></li><li><p>avg：平均值</p></li><li><p>sum：求和</p></li></ul></li><li><p>需求</p><ul><li><p>题目<img src="https://api2.mubu.com/v3/document_image/f042f426-df92-4061-bdfd-1c5ff504c317-8085313.jpg" alt="img"></p></li><li><p>我的代码<img src="https://api2.mubu.com/v3/document_image/7471f562-7047-4d3f-86ea-aa8ad5ee76e7-8085313.jpg" alt="img"></p></li></ul></li><li><p>tips</p><ul><li><p>1.聚合函数不对null值进行运算，所以要统计数据数，要count非空字段，比如说name，username都是非空字段</p><ul><li><p>count员工表是id数<img src="https://api2.mubu.com/v3/document_image/488d4f47-4e72-4713-854d-4da16d2ba43a-8085313.jpg" alt="img"></p></li><li><p>count员工表job数（含一个job为null的员工）<img src="https://api2.mubu.com/v3/document_image/a87681d4-c683-47bf-8d12-1ee4e0857ccb-8085313.jpg" alt="img"></p></li></ul></li><li><p>2.count()函数参数里可以放三个类型的东西：1.count(字段)2.count(常量)3.count(*)    &lt;–推荐</p><ul><li><p>1.常量可以是数字0，1，2，3…或者是字符串’A’，只要count一个不为null的常量都可以，因为null不参与聚合函数的运算<img src="https://api2.mubu.com/v3/document_image/ab6d1290-b707-49b8-a9a8-c66a75c7ac13-8085313.jpg" alt="img"></p></li><li><p>2.<em>是通配的意思，通过</em>就可以求这取张表的总数据量，项目开发时推荐使用count(*)，因为MySQL数据库底层专门对此做了优化处理</p></li></ul></li></ul></li></ul></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;MySQL课程介绍&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;上一章的案例是根据xml文件来存储数据的，但是开发中会采用专业的数据库来存储数据
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;https://api2.mubu.com/v3/document_image/1c2f34f4-def</summary>
      
    
    
    
    <category term="Computer Learning" scheme="https://starlike-daydream.github.io/categories/Computer-Learning/"/>
    
    
    <category term="database" scheme="https://starlike-daydream.github.io/tags/database/"/>
    
  </entry>
  
  <entry>
    <title>Git Study</title>
    <link href="https://starlike-daydream.github.io/posts/6d497fae.html"/>
    <id>https://starlike-daydream.github.io/posts/6d497fae.html</id>
    <published>2023-12-03T04:55:26.000Z</published>
    <updated>2024-04-24T05:48:15.251Z</updated>
    
    <content type="html"><![CDATA[<h1>git的初始化操作</h1><ul><li>安装好git后：git version查看git版本，检测是否安装成功</li><li>一些dos命令：pwd–显示当前目录  ls–显示当前目录下的文件 cd …–回退上一级目录 cd directory–切换目录  clear–清除历史记录</li><li>git config --global <a href="http://user.name/">user.name</a> [&quot; &quot;]：查看[设置]用户名</li><li>git config --global user.email [&quot; &quot;]：查看[设置]用户邮箱</li><li>git init：在当前目录初始化一个仓库</li></ul><h1>git的提交操作</h1><ul><li><h6 id="git-add-文件名-：把文件上传到暂存区">git add 文件名 ：把文件上传到暂存区</h6></li><li><p>git add .：上传当前目录所有文件到暂存区</p></li><li><p>git add *：上传当前目录全部非隐藏文件到暂存区</p></li><li><p>git add .*：上传当前目录全部隐藏文件到暂存区</p></li><li><p>git commit：把当前保存的文件提交固定成一个版本</p><ul><li>试一下会vim的终端编辑器写提交说明（备注）（我咋没有，我点了vs右上角加号才推出）</li><li>按i/a进入编辑模式，写好后按Esc退出编辑模式，按下英文冒号:，输入wq回车，保存退出</li></ul></li><li><p>git都是按行来对比文件不同的，就两种情况：新增，删除（如果是同一行的修改，那就是同时删除一行，新增一行）</p></li><li><p>git log：查看提交信息（日志），每次提交都会记录日志信息</p><ul><li>提交格式：commit之后一大串随机id作为唯一标识，author是作者（是所设置的用户名和邮箱），在下面就是刚刚写的提交说明<img src="https://api2.mubu.com/v3/document_image/e9dac96c-11df-4465-9dba-ad9ad50d6741-8085313.jpg" alt="img"></li><li>当commit（提交）比较多，git log 的内容在一页显示不完整，满屏放不下的时候，就会显示冒号。</li><li>回车（往下滚一行）、空格（往下滚一页）可以继续查看剩余内容。</li><li>退出：英文状态下 按 q 可以退出git log 状态</li></ul></li><li><p>VSCode提示：新增文件显示绿色，修改文件显示橙色M（Modified），以示和上次提交的数据不一样</p></li><li><p>git commit -m “”：写提交说明的简化版操作，这样会跳过vim编辑，大部分人会用这种方式写提交说明</p><ul><li>git commit -m “fix(test):change content”：一种提交说明风格规范，不是硬性要求，为了让别人一目了然你的修改内容（修复(文件)：修复了……（改变内容））</li><li>如果要参与一个国际项目，一个规范的提交信息和英文是必要的，其他的规范词可以搜索git commit规范词自行了解，自己项目能看懂就行</li></ul></li><li><p>vscode页面化操作，作出修改，点击左边的git菜单，点击文件就能对比修改的内容，点击上方√号，就能提交，提示没有暂存的更改，是否暂存更改，点是就能执行git add .和git commit 了，再在上面输入commit说明按下回车就commit完成了</p></li><li><p>vscode自带git所有基本操作，高级操作需安装git history diff插件查看所有历史记录</p></li></ul><h1>git的版本控制操作</h1><ul><li>git reset --hard 提交id：回退到历史提交状态，会清空历史记录<ul><li>reset是重置的意思</li><li>–hard是重置模式：hard表示硬重置，即覆盖所有变更</li><li>另外还有soft模式和默认的mixed模式</li></ul></li><li>但是只是想要切换版本该怎么办呢，这时候就可以用分支branch，顾名思义，分支就是把当前版本复制一份当作新的版本分支</li><li>git branch 分支名：就可以当前版本创建一个分支</li><li>git branch -a：查看当前已有的分支，master是主分支。</li><li>git checkout 分支名：切换到新的分支</li><li>你可以在主分支上和分支上写代码，然后某一天把这两个分支用git merge合在一起，一个人用处不大，但在团队协作用处就大了，一个团队开发的项目离不开分支</li><li>比如说：一个项目现有1.0版本，但要1.1版本要新增五个功能，就让五个成员分别去写这五个功能：让他们新建一个分支去，分别去开发这五个功能，最后开发好了再合并起来（git merge），再提交并使用git tag（tag命令创建固定版本）打标签生成1.1版本，团队开发互不影响，但又可以同时协作</li><li>形象的解释：文档1.0复制给5个人去增加5个新功能（branch），然后再把他们各自写好的功能收上来，复制粘贴他们各自写得功能（merge），最终形成1.1版本并保存（commit，tag）<ul><li><img src="https://api2.mubu.com/v3/document_image/a5209ad2-6668-4d6a-9f12-514ad9cb2f7e-8085313.jpg" alt="img"></li></ul></li></ul><h1>远程仓库</h1><ul><li>团队协作肯定不能在同一台电脑上，最好在一个服务器上，这个服务器可以自己搭建，但是还是公用的省事：github/gitee（简单来说就是可以git操作的网盘）</li><li>github上new了一个repositoty,之后会有些教程，上传提交之后，<ul><li>1.git branch -M main:创建主分支并把主分支切换为main</li><li>2.git remote add origin 仓库url(你的仓库链接):添加一个远程仓库地址(相当于给这个git项目设置一个网盘地址,让它知道上传到哪里)</li><li>3.git push -u origin main:push也就是上传到github,之后要登陆一下github(push后面的参数是push源和分支)</li><li>我的代码出问题了,好像要git pull --rebase origin main ,再git push -u origin main,好像是仓库不一致导致的</li><li>之后刷新网页就可以发现上传成功啦</li><li>图片<ul><li><img src="https://api2.mubu.com/v3/document_image/0a2849ea-5067-45cc-baad-b80dc381c036-8085313.jpg" alt="img"></li></ul></li><li>git remote -v:查看已建立的连接</li><li>git remote remove origin:取消当前的远程连接</li></ul></li></ul><h1>参与开源项目</h1><ul><li>来到别人的项目,点击右上角的fork:把别人的代码库复制到我的账号了,类似branch,右上角点开自己的仓库就会发现已经复制下来了</li><li>点击code,复制仓库的http链接</li><li>在电脑上新建文件夹,打开终端,然后输入:git clone 你的仓库链接 .(把网盘上的仓库克隆到本地电脑)</li><li>查看建立连接发现连接的是自己的,使用命令</li><li>git clone add upstream 别人的仓库链接:添加上游命令,再remote -v看一下就有了</li><li>使用git checkout -b kwc来创建并切换进入kwc的分支</li><li>之后创建文件夹,创建文件,写入文件内容,add .,commit -m “add(number):康文昌”,push -u origin kwc,回到自己的仓库,就发现已经有这个分支了</li><li>这时候就来re01的仓库,点pull request:拉取请求,简称PR,进去之后点new,新建pr,这里base就是根源,选择re01的main分支,compare就是比较,选择自己刚刚创建的分支,选择后如果显示绿色对号able to merge就是可以合并的意思,那就填写pr信息:标题,内容,下面点击create创建pr,就提交成功了,这就代表参与了开源项目</li><li>如果没有显示对号,那就代表up提交了新的commit,导致版本不一致,这时就需要更新本地版本,</li><li>git fetch upstream:从上游更新最新代码</li><li>然后执行:git merge upstream/main,把远程的最新代码合并到自己的分支中,再git push就好了</li></ul><h1>问题记录</h1><ul><li>ssh连接除了好几次错误：先是22端口拒绝连接，然后我去搜，最后发现电脑只有ssh客户端，没有ssh服务器，然后下了似乎又说真实性，yes/no什么的，这里又搜了一下，是要输yes，我的443端口没问题，不是防火墙的原因，好像少了一个kown_hosts文件</li><li>类似下图的错误，反正yes着yes着的、差不多就好了</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;git的初始化操作&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;安装好git后：git version查看git版本，检测是否安装成功&lt;/li&gt;
&lt;li&gt;一些dos命令：pwd–显示当前目录  ls–显示当前目录下的文件 cd …–回退上一级目录 cd directory–切换目录  c</summary>
      
    
    
    
    <category term="Computer Learning" scheme="https://starlike-daydream.github.io/categories/Computer-Learning/"/>
    
    
    <category term="git" scheme="https://starlike-daydream.github.io/tags/git/"/>
    
  </entry>
  
</feed>
